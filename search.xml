<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>《计算机网络（谢希仁）》- 第四章 网络层</title>
      <link href="/2024/12/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E5%9B%9B%E7%AB%A0/%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%B1%82/"/>
      <url>/2024/12/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E5%9B%9B%E7%AB%A0/%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%B1%82/</url>
      
        <content type="html"><![CDATA[<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul><li><a href="#41-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%9C%8D%E5%8A%A1">4.1 网络层提供的两种服务</a></li><li><a href="#42-%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AEip">4.2 网际协议IP</a><ul><li><a href="#421-%E8%99%9A%E6%8B%9F%E4%BA%92%E8%BF%9E%E7%BD%91%E7%BB%9C">4.2.1 虚拟互连网络</a></li><li><a href="#422-%E5%88%86%E7%B1%BB%E7%9A%84ip%E5%9C%B0%E5%9D%80">4.2.2 分类的IP地址</a></li><li><a href="#423-ip%E5%9C%B0%E5%9D%80%E4%B8%8E%E7%A1%AC%E4%BB%B6%E5%9C%B0%E5%9D%80">4.2.3 IP地址与硬件地址</a></li><li><a href="#424-%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AEarp">4.2.4 地址解析协议ARP</a></li><li><a href="#425-ip%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E6%A0%BC%E5%BC%8F">4.2.5 IP数据报的格式</a></li></ul></li><li><a href="#43-%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91%E5%92%8C%E6%9E%84%E9%80%A0%E8%B6%85%E7%BD%91">4.3 划分子网和构造超网</a><ul><li><a href="#431-%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91">4.3.1 划分子网</a></li><li><a href="#432-%E4%BD%BF%E7%94%A8%E5%AD%90%E7%BD%91%E6%97%B6%E5%88%86%E7%BB%84%E7%9A%84%E8%BD%AC%E5%8F%91">4.3.2 使用子网时分组的转发</a></li><li><a href="#433-%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80cidr%E6%9E%84%E9%80%A0%E8%B6%85%E7%BD%91">4.3.3 无分类编址CIDR(构造超网)</a></li></ul></li><li><a href="#44-%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AEicmp">4.4 网际控制报文协议ICMP</a><ul><li><a href="#441-icmp%E6%8A%A5%E6%96%87%E7%9A%84%E7%A7%8D%E7%B1%BB">4.4.1 ICMP报文的种类</a></li><li><a href="#442-icmp%E7%9A%84%E5%BA%94%E7%94%A8%E4%B8%BE%E4%BE%8B">4.4.2 ICMP的应用举例</a></li></ul></li><li><a href="#45-%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE">4.5 互联网的路由选择协议</a><ul><li><a href="#451-%E6%9C%89%E5%85%B3%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%87%A0%E4%B8%AA%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">4.5.1 有关路由选择协议的几个基本概念</a></li><li><a href="#452-%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AErip">4.5.2 内部网关协议RIP</a></li><li><a href="#453-%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AEospf">4.5.3 内部网关协议OSPF</a></li><li><a href="#454-%E5%A4%96%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AEbgp">4.5.4 外部网关协议BGP</a></li><li><a href="#455-%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90">4.5.5 路由器的构成</a></li></ul></li><li><a href="#46-ipv6">4.6 IPv6</a><ul><li><a href="#461-ipv6%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%A6%96%E9%83%A8">4.6.1 IPv6的基本首部</a></li><li><a href="#462-ipv6%E7%9A%84%E5%9C%B0%E5%9D%80">4.6.2 IPv6的地址</a></li><li><a href="#463-%E4%BB%8Eipv4%E5%90%91ipv6%E8%BF%87%E6%B8%A1">4.6.3 从IPv4向IPv6过渡</a></li><li><a href="#464-icmpv6">4.6.4 ICMPv6</a></li></ul></li><li><a href="#47-ip%E5%A4%9A%E6%92%AD">4.7 IP多播</a><ul><li><a href="#471-ip%E5%A4%9A%E6%92%AD%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">4.7.1 IP多播的基本概念</a></li><li><a href="#472-%E5%9C%A8%E5%B1%80%E5%9F%9F%E7%BD%91%E4%B8%8A%E8%BF%9B%E8%A1%8C%E7%A1%AC%E4%BB%B6%E5%A4%9A%E6%92%AD">4.7.2 在局域网上进行硬件多播</a></li><li><a href="#473-%E7%BD%91%E9%99%85%E7%BB%84%E7%AE%A1%E7%90%86%E5%8D%8F%E8%AE%AEigmp%E5%92%8C%E5%A4%9A%E6%92%AD%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE">4.7.3 网际组管理协议IGMP和多播路由选择协议</a></li></ul></li><li><a href="#48-%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91vpn%E5%92%8C%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2nat">4.8 虚拟专用网VPN和网络地址转换NAT</a><ul><li><a href="#481-%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91vpn">4.8.1 虚拟专用网VPN</a></li><li><a href="#482-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2nat">4.8.2 网络地址转换NAT</a></li></ul></li><li><a href="#49-%E5%A4%9A%E5%8D%8F%E8%AE%AE%E6%A0%87%E8%AE%B0%E4%BA%A4%E6%8D%A2mpls">4.9 多协议标记交换MPLS</a></li></ul><h2 id="4-1-网络层提供的两种服务"><a href="#4-1-网络层提供的两种服务" class="headerlink" title="4.1 网络层提供的两种服务"></a>4.1 网络层提供的两种服务</h2><p>网络层提供的服务可以是”<strong>面向连接</strong>“的或是”<strong>无连接</strong>“的服务。</p><ul><li><p>用于打电话的传统电信网使用<strong>面向连接</strong>的通信方式：</p><ul><li>先建立连接预留出网络资源（建立一条虚电路）</li><li>然后再传送信息</li><li>提供的是<strong>可靠传输</strong>的服务</li></ul></li><li><p>互联网采用的是<strong>无连接</strong>的方式：</p><ul><li>发送分组时不需要建立连接</li><li>网络层向上只提供简单灵活的、无连接的、尽最大努力交付的数据报服务</li><li>这样使造价降低，运行灵活</li></ul></li></ul><h2 id="4-2-网际协议IP"><a href="#4-2-网际协议IP" class="headerlink" title="4.2 网际协议IP"></a>4.2 网际协议IP</h2><p>这里的 <font color="red">IP</font> 是 IP 协议的第 4 个版本，实际叫做 <strong>IPv4</strong>。较新的还有 <strong>IPv6</strong>。</p><p>与 IP 协议配套的还有三个协议：</p><ul><li><font color="red">地址解析协议 ARP</font></li><li><font color="red">网际控制报文协议 ICMP</font></li><li><font color="red">网际组管理协议 IGMP</font></li></ul><h3 id="4-2-1-虚拟互连网络"><a href="#4-2-1-虚拟互连网络" class="headerlink" title="4.2.1 虚拟互连网络"></a>4.2.1 虚拟互连网络</h3><p>不同网络的区别很大，因为没有一种单一的网络能够适应所有用户的需求。因此需要通过一些中间设备将网络连接起来。</p><p>根据所在层次，可以将中间设备分为以下四种：</p><ul><li><strong>物理层</strong>使用的叫<font color="red">转发器</font></li><li><strong>数据链路层</strong>使用的叫<font color="red">网桥</font>或<font color="red">桥接器</font></li><li><strong>网络层</strong>使用的叫<font color="red">路由器</font></li><li><strong>网络层以上</strong>使用的叫<font color="red">网关</font></li></ul><p>重要说明：</p><ul><li>在物理层使用转发器或在数据链路层使用网桥时，仅是把一个网络扩大了。从网络层看，这还是一个网络，不是网络互连</li><li>网络互连是在网络层通过<strong>路由器</strong>实现的</li><li>都使用 IP 协议的网络互连以后叫<strong>虚拟互连网络</strong>，含义是这些在物理层面不同的网络在网络层看起来好像是一个统一的网络，又叫 <font color="red">IP 网</font></li><li>现在的互联网就是使用了 <font color="red">IP 协议</font>和 <font color="red">TCP 协议</font></li></ul><h3 id="4-2-2-分类的IP地址"><a href="#4-2-2-分类的IP地址" class="headerlink" title="4.2.2 分类的IP地址"></a>4.2.2 分类的IP地址</h3><h4 id="IP-地址及其表示方法"><a href="#IP-地址及其表示方法" class="headerlink" title="IP 地址及其表示方法"></a>IP 地址及其表示方法</h4><p>整个互联网就是一个单一的、抽象的网络。<br><font color="red">IP 地址</font>就是给互联网上每一台主机或路由器的每一个接口分配一个全世界唯一的 <strong>32 位的标识符</strong>。</p><p>IP 地址的编址方法经历了三个阶段：</p><ul><li>分类的 IP 地址</li><li>子网的划分</li><li>构成超网</li></ul><p>分类的 IP 地址就是将 IP 地址划分为多个固定类，每一类地址由两个固定长度的字段组成：</p><ul><li>第一个字段是<font color="red">网络号</font>，标志主机所连接到的网络，一个网络号在整个互联网范围内是唯一的</li><li>第二个字段是<font color="red">主机号</font>，标志该主机（或路由器），一个主机号在该网络号所指明的网络范围内是唯一的</li></ul><p>IP 地址 &#x3D; {&lt;网络号&gt;，&lt;主机号&gt;}，它既指明了主机接口，也指明了所在网络。</p><p>分类的 IP 地址分为以下 5 类：</p><ul><li><strong>A 类、B 类、C 类</strong>都是单播地址，是最常用的</li><li><strong>D 类</strong>是用于多播（一对多通信）</li><li><strong>E 类</strong>地址保留为以后用</li></ul><p>分类是考虑到了不同网络间的差异性，有的网络主机很多，有的则很少。</p><blockquote><p>现在广泛使用<font color="red">无分类 IP 地址</font>进行路由选择，分类的地址已经成为历史。</p></blockquote><p>IP 地址是 <strong>4 字节共 32 位</strong>字符，平常电脑上显示的是每个字节按转化为 10 进制后的结果，称为<font color="red">点分十进制法</font>。</p><h4 id="IP-地址的特点："><a href="#IP-地址的特点：" class="headerlink" title="IP 地址的特点："></a>IP 地址的特点：</h4><ol><li><p>每一个 IP 地址都是由网络号和主机号两部分组成，是一种<strong>分等级的地址结构</strong>。这种结构有几个优点：</p><ul><li>IP 地址管理机构在分配 IP 地址时只分配网络号，而主机号由得到网络号的单位内部自行分配</li><li>路由器仅根据目的主机所连接的网络号来转发分组而不考虑主机号。这使路由表中的项目数大幅减少，减小了路由表的存储空间和查找时间</li></ul></li><li><p>IP 地址是标志一台主机（或路由器）和一条链路的接口。如果一台主机同时连接到两个网络，它就有两个 IP 地址</p></li><li><p>每个路由器至少连接到两个网络，所以一个路由器至少有两个不同的 IP 地址</p></li><li><p>互联网中，一个网络指的是具有相同网络号的主机的集合。所以用转发器或网桥连接起来的若干局域网仍是一个网络</p></li><li><p>IP 地址中，所有分配到网络号的网络都是平等的，不管它的范围多大或多小</p></li></ol><h3 id="4-2-3-IP地址与硬件地址"><a href="#4-2-3-IP地址与硬件地址" class="headerlink" title="4.2.3 IP地址与硬件地址"></a>4.2.3 IP地址与硬件地址</h3><ul><li><font color="red">硬件地址</font>（又称物理地址、MAC地址）是<strong>数据链路层和物理层</strong>使用的地址。MAC帧传送时使用的源地址和目的地址都属于硬件地址，放在 MAC 帧的首部</li><li><font color="red">IP 地址</font>是<strong>网络层和以上各层</strong>使用的地址，是一种逻辑地址。放在 IP 数据报的首部</li></ul><p>下面是三个局域网通过两个路由器连接在一起，主机 H1 要与主机 H2 通信。<br>路由器因为同时连在两个局域网上，所以有两个硬件地址。</p><p><strong>注意</strong>：</p><ul><li>在 IP 层抽象的互联网上只能看到 IP 数据报。虽然信息要经过路由器 R1 和 R2 的转发，但是 IP 报首部中的源地址和目的地址始终是 IP1 和 IP2</li><li>虽然 IP 数据报首部有源地址，路由器只根据目的站的 IP 地址的网络号进行选择</li><li>在局域网的链路层，只能看见 MAC 帧。MAC 帧在不同网络上传送时，MAC 帧首部中的源地址和目的地址要发生变化</li><li>IP 层抽象的互联网屏蔽了下层的复杂细节。只要在网络层上，就可以使用统一的、抽象的 IP 地址来研究主机和主机间的通信</li></ul><h3 id="4-2-4-地址解析协议ARP"><a href="#4-2-4-地址解析协议ARP" class="headerlink" title="4.2.4 地址解析协议ARP"></a>4.2.4 地址解析协议ARP</h3><p>网络层用的是 IP 地址，但实际网络的链路上传送数据帧时还是要用硬件地址。当数据传到不同网络时，MAC 帧中的硬件地址还会发生改变，主机或路由器怎么知道该在 MAC 帧的首部中填入什么硬件地址呢？</p><p><font color="red">ARP 协议</font>的用途是从网络层使用的 IP 地址解析出数据链路层使用的硬件地址。</p><p>根据地址解析协议 ARP，每台主机都有一个 <strong>ARP 高速缓存</strong>，里面有本局域网上的各主机和路由器的 IP 地址到硬件地址的映射表。<br>主机的硬件地址可能会发生改变，因此该映射表会时常更新，映射表中的每个项目都有生存时间，超过生存时间的项目会被删掉。</p><p>当主机 A 向本局域网上的主机 B 发送 IP 数据报时有两种情况：</p><ol><li><p>主机 A 的 ARP 高速缓存的映射表中<strong>有</strong>主机 B 的 IP 地址：</p><ul><li>就把对应的硬件地址写入 MAC 帧</li><li>然后通过局域网把该 MAC 帧发给此硬件地址</li></ul></li><li><p>主机 A 的 ARP 高速缓存中<strong>没有</strong> B 的 IP 地址。此时按以下步骤找出 B 的硬件地址：</p><ul><li>主机 A 自动运行 ARP 进程，ARP 进程在本局域网上广播发送一个 ARP 请求分组。分组中指明了自己的 IP 地址与硬件地址，和主机 B 的 IP 地址</li><li>本局域网上所有主机上运行的 ARP 进程都受到这个 ARP 请求分组</li><li>主机 B 的 IP 地址与 ARP 请求分组中要查询的 IP 地址一致，收下分组，并向主机 A 发送响应分组，在其中写入自己的硬件地址。其他主机则不作响应</li><li>主机 A 收到主机 B 的响应分组后，把主机 B 的 IP 地址到硬件地址的映射写入 ARP 高速缓存中</li></ul></li></ol><p>ARP 解决的是同一个局域网上主机或路由器的 IP 地址到硬件地址的映射问题。它无法解析另一个局域网上主机的硬件地址，实际上也不用。</p><h4 id="使用-ARP-的四种典型情况"><a href="#使用-ARP-的四种典型情况" class="headerlink" title="使用 ARP 的四种典型情况"></a>使用 ARP 的四种典型情况</h4><ol><li><p>发送方是主机，要把 IP 报发到<strong>同一个网络</strong>上的另一台主机：</p><ul><li>如从 H1 到 H2，这时 H1 发送 ARP 请求分组（在网 1 上广播）找到 H2 的硬件地址</li></ul></li><li><p>发送方是主机，要把 IP 报发到<strong>另一个网络</strong>上的某一台主机：</p><ul><li>如从 H1 到 H3，这时 H1 发送 ARP 请求分组（在网 1 上广播）找到网 1 上的一个路由器 R1 的硬件地址</li><li>剩下的事情由 R1 完成</li></ul></li><li><p>发送方是路由器，要把 IP 报转发到与它连接在<strong>同一个网络</strong>上的主机：</p><ul><li>如 R1 到 H2，这时 R1 发送 ARP 请求分组（在网 2 上广播）找到主机 H3 的硬件地址</li></ul></li><li><p>发送方是路由器，要把 IP 报转发到<strong>另一个网络</strong>上的一台主机：</p><ul><li>如 R1 到 H3，这时 R1 发送 ARP 请求分组（在网 2 上广播）找到本网络上另一个路由器的硬件地址</li></ul></li></ol><p>总的来说，当发送方与接收方不在同一个网络时，要通过同时位于两个或更多个网络上的路由器来中转，而 ARP 协议则用于每个局域网内部的地址解析。</p><h3 id="4-2-5-IP数据报的格式"><a href="#4-2-5-IP数据报的格式" class="headerlink" title="4.2.5 IP数据报的格式"></a>4.2.5 IP数据报的格式</h3><p>一个 IP 数据报的首部包括两部分，前一部分是固定长度，共 20 字节。后面是一些可选字段，长度可变。</p><p>一个 IP 数据报的首部包括两部分:</p><ul><li>前一部分是<strong>固定长度</strong>，共 20 字节</li><li>后面是一些<strong>可选字段</strong>，长度可变</li></ul><h4 id="IP-数据报首部的固定部分的各字段"><a href="#IP-数据报首部的固定部分的各字段" class="headerlink" title="IP 数据报首部的固定部分的各字段:"></a>IP 数据报首部的固定部分的各字段:</h4><ol><li><p><strong>版本</strong>：</p><ul><li>占 4 位</li><li>通信双方使用的 IP 协议的版本必须一致</li></ul></li><li><p><strong>首部长度</strong>：</p><ul><li>占 4 位，最大值是 15</li><li>注意其单位是 4 字节，也就是首部最大长度为 15*4&#x3D;60 字节</li><li>首部长度必须是 4 字节的整数倍，因此可选字段后面还有一个填充字段</li></ul></li><li><p><strong>区分服务</strong>：</p><ul><li>占 8 位</li><li>一般不使用，只有使用<font color="red">区分服务 DiffServ</font>时此字段才有意义</li><li>根据字段的数值为提供不同等级的服务质量</li></ul></li><li><p><strong>总长度</strong>：</p><ul><li>占 16 位，最大值是 65535</li><li>是首部和数据部分的长度和，单位是字节</li><li>IP 数据报的长度还受到 MAC 帧最大长度的限制，因此不能太大</li><li>如果长度过长需要进行分片。分片后总长度指的是该分片的首部长度和数据长度之和</li></ul></li><li><p><strong>标识</strong>：</p><ul><li>占 16 位</li><li>同一个数据报的不同分片标识相同</li><li>接收方能根据标识将不同分片重装为原本的数据报</li></ul></li><li><p><strong>标志</strong>：</p><ul><li>占 3 位</li><li>最低位为 1 表示后面还有分片，为 0 表示这是最后一个分片</li><li>中间位为 1 表示不能分片，为 0 表示可以分片</li><li>首位没有含义</li></ul></li><li><p><strong>片偏移</strong>：</p><ul><li>占 13 位</li><li>指出较长的分组分片后，某片在原分组的相对位置</li><li>单位是 8 字节，故每个分片的长度是 8 字节的整数倍</li></ul></li><li><p><strong>生存时间</strong>：</p><ul><li>占 8 位</li><li>表明数据报在网络中的寿命</li><li>单位是跳数，指明了数据报在互联网中至多可经过多少个路由器</li></ul></li><li><p><strong>协议</strong>：</p><ul><li>占 8 位</li><li>指明了数据报携带的数据使用了哪种协议</li></ul></li><li><p><strong>首部检验和</strong>：</p><ul><li>占 16 位</li><li>这个字段只检验首部，不包括数据部分</li><li>数据报每经过一个路由器，路由器就要重新计算一下首部检验和</li></ul></li><li><p><strong>源地址</strong>：</p><ul><li>占 32 位</li></ul></li><li><p><strong>目的地址</strong>：</p><ul><li>占 32 位</li></ul></li></ol><h4 id="IP-数据报首部的可变部分"><a href="#IP-数据报首部的可变部分" class="headerlink" title="IP 数据报首部的可变部分"></a>IP 数据报首部的可变部分</h4><ul><li>长度可变，具有多种功能，但很少使用</li><li><font color="red">IPv6</font>已经把这部分做成固定长度的了</li></ul><h3 id="4-2-6-IP层转发分组的流程"><a href="#4-2-6-IP层转发分组的流程" class="headerlink" title="4.2.6 IP层转发分组的流程"></a>4.2.6 IP层转发分组的流程</h3><p>路由器的路由表中不直接存储主机地址，而是存储<strong>目的网络的地址</strong>和对应<strong>下一跳的地址</strong>。<br>路由表中并没有指明完整的网络路径，仅指出要想到达某个网络，需要先到哪个路由器，即仅指出下一步该怎么走。这样一跳一跳直到最后到达目的网络。</p><h4 id="分组转发算法如下"><a href="#分组转发算法如下" class="headerlink" title="分组转发算法如下"></a>分组转发算法如下</h4><ol><li><p>从数据报的首部提取出目的主机的 IP 地址 D，得出目的网络地址为 N</p></li><li><p>若 N 就是与此路由器直接相连的某个网络地址，就<strong>直接交付</strong>，即直接把数据报交付目的主机；否则就是<strong>间接交付</strong>，执行 3</p></li><li><p>若路由表中有目的地址为 D 的特定主机路由，则把数据报传送给路由表中所指明的下一跳路由器。否则执行 4</p></li><li><p>若路由表中有到达网络 N 的路由，则把数据报传送给路由表所指明的下一跳路由器，否则执行 5</p></li><li><p>若路由表有一个默认路由，则把数据报传送给路由表所指明的默认路由器，否则执行 6</p></li><li><p>报告转发分组出错</p></li></ol><h3 id="4-3-划分子网和构造超网"><a href="#4-3-划分子网和构造超网" class="headerlink" title="4.3 划分子网和构造超网"></a>4.3 划分子网和构造超网</h3><h3 id="4-3-1-划分子网"><a href="#4-3-1-划分子网" class="headerlink" title="4.3.1 划分子网"></a>4.3.1 划分子网</h3><ul><li>之前是两级 IP 地址，缺点很多。后在 IP 地址中又增加了一个<font color="red">子网号</font>字段，将 IP 地址分为了三级</li><li>划分子网是把 IP 地址的主机号再划分，未改变网络号</li></ul><h4 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h4><ul><li>划分子网后，IP 数据报的首部无法体现是否进行了划分。需要使用<font color="red">子网掩码</font></li><li>现在的互联网规定所有的网络都必须使用子网掩码，路由器的路由表中也必须有子网掩码这一栏</li><li>路由器在和相邻路由器交换信息时，必须把自己所在子网的子网掩码告诉对方</li></ul><h3 id="4-3-2-使用子网时分组的转发"><a href="#4-3-2-使用子网时分组的转发" class="headerlink" title="4.3.2 使用子网时分组的转发"></a>4.3.2 使用子网时分组的转发</h3><p>使用子网划分后，路由表中必须包含<strong>目的网络地址</strong>、<strong>子网掩码</strong>和<strong>下一跳地址</strong>三项内容。</p><h4 id="此时的分组转发算法如下"><a href="#此时的分组转发算法如下" class="headerlink" title="此时的分组转发算法如下"></a>此时的分组转发算法如下</h4><ol><li><p>从数据报的首部提取出目的主机的 IP 地址 D</p></li><li><p>判断是否为直接交付。对路由器直接相连的网络逐个检查：</p><ul><li>用各网络的子网掩码逐个与 D 按位相与</li><li>看结果是否和相应的网络地址匹配</li><li>若匹配，就直接交付；否则就是间接交付，执行 3</li></ul></li><li><p>若路由表中有目的地址为 D 的特定主机路由，则把数据报传送给路由表中所指明的下一跳路由器。否则执行 4</p></li><li><p>对路由表中的每一行，用其中的子网掩码和 D 逐位相与：</p><ul><li>若结果与该行的目的网络地址匹配，则把数据报传送给该行指明的下一跳路由器</li><li>否则执行 5</li></ul></li><li><p>若路由表有一个默认路由，则把数据报传送给路由表所指明的默认路由器，否则执行 6</p></li><li><p>报告转发分组出错</p></li></ol><h3 id="4-3-3-无分类编址CIDR-构造超网"><a href="#4-3-3-无分类编址CIDR-构造超网" class="headerlink" title="4.3.3 无分类编址CIDR(构造超网)"></a>4.3.3 无分类编址CIDR(构造超网)</h3><p><font color="red">无分类编址</font>全名无分类域间路由选择 CIDR。</p><h4 id="CIDR-有两个主要特点"><a href="#CIDR-有两个主要特点" class="headerlink" title="CIDR 有两个主要特点"></a>CIDR 有两个主要特点</h4><ol><li><p>CIDR 消除了传统的 A,B,C 类地址和划分子网的概念：</p><ul><li>它把 32 位的 IP 地址分为前后两部分</li><li>“前缀”用来指明网络，后面部分用来指明主机</li><li>因此它使用的是两级编址，但是是无分类的两级编址</li></ul></li><li><p>CIDR 把前缀都相同的连续的 IP 地址组成一个 <strong>CIDR 地址块</strong>：</p><ul><li>只要知道该地址块中的任意一个地址，就可以知道地址块的起始地址、最大地址和地址块中的地址数</li><li>CIDR 使用 32 位的地址掩码，地址掩码中 1 的个数对应的就是前缀的长度</li><li>前缀越短，其地址块包含的地址数越多</li><li>使用 CIDR 可以更有效地分配地址空间</li></ul></li></ol><h4 id="最长前缀匹配"><a href="#最长前缀匹配" class="headerlink" title="最长前缀匹配"></a>最长前缀匹配</h4><ul><li>CIDR 中，路由表的每个项目由网络前缀和下一跳地址组成</li><li>查找时可能得到不止一个匹配结果</li><li>这是从匹配结果中选择具有最长网络前缀的路由，因为它对应的地址块最小</li></ul><h4 id="使用二叉线索从查找路由表"><a href="#使用二叉线索从查找路由表" class="headerlink" title="使用二叉线索从查找路由表"></a>使用二叉线索从查找路由表</h4><ul><li>无分类编址的路由表通常存放在一个二叉线索树中</li><li>树的每一层对应 IP 地址中的一位，树最多有 32 层</li><li>给定一个 IP 地址，查找它是否在该项目表中，只需在二叉线索树中一层层对应向下寻找，若中间无法在二叉树中找到对应分支，表明这个地址不在这个二叉线索中</li></ul><h3 id="4-4-网际控制报文协议ICMP"><a href="#4-4-网际控制报文协议ICMP" class="headerlink" title="4.4 网际控制报文协议ICMP"></a>4.4 网际控制报文协议ICMP</h3><p><font color="red">网际控制报文协议 ICMP</font> 用于更有效地转发 IP 数据报和提高交付成功的机会。<br>ICMP 报文装在 IP 数据报中，作为其中的数据部分。<br>ICMP 报文的首部共 8 个字节，具体如下图。<br>其中检验和字段用来检验整个 ICMP 报文。</p><h3 id="4-4-1-ICMP报文的种类"><a href="#4-4-1-ICMP报文的种类" class="headerlink" title="4.4.1 ICMP报文的种类"></a>4.4.1 ICMP报文的种类</h3><p>ICMP 报文包括 ICMP 差错报告报文和 ICMP 询问报文两类，每类下细分为几种不同的类型。</p><p>ICMP 报文包括 <strong>ICMP 差错报告报文</strong>和 <strong>ICMP 询问报文</strong>两类，每类下细分为几种不同的类型。</p><h4 id="4-种常用的-ICMP-差错报告报文"><a href="#4-种常用的-ICMP-差错报告报文" class="headerlink" title="4 种常用的 ICMP 差错报告报文"></a>4 种常用的 ICMP 差错报告报文</h4><ol><li><p><strong>终点不可达</strong>：</p><ul><li>当路由器或主机不能交付数据报时就向源点发送此报文</li></ul></li><li><p><strong>时间超过</strong>：</p><ul><li>路由器收到生存时间为 0 的报文时，除丢弃该数据报外，还要向源点发送此报文</li><li>当终点在约定时间内未收到一个数据报的全部分片时，就丢弃已收到的所有分片，并向源点发送此报文</li></ul></li><li><p><strong>参数问题</strong>：</p><ul><li>当路由器或目的主机收到的数据报的首部中有的字段值不正确时，就丢弃该数据报并发送此报文</li></ul></li><li><p><strong>改变路由（重定向）</strong>：</p><ul><li>路由器把此报文发送给主机，以告诉主机下次将数据报发给另外的路由器</li></ul></li></ol><h4 id="2-种常用的-ICMP-询问报文"><a href="#2-种常用的-ICMP-询问报文" class="headerlink" title="2 种常用的 ICMP 询问报文"></a>2 种常用的 ICMP 询问报文</h4><ol><li><p><strong>回送请求报文和回答报文</strong>：</p><ul><li>回送请求报文是由主机或路由器向一个特定目的主机发出的询问</li><li>收到此报文的主机必须给源主机发送 ICMP 回送回答报文</li></ul></li><li><p><strong>时间戳请求报文和回答报文</strong>：</p><ul><li>时间戳请求报文是请某台主机或路由器回答当前的日期和时间</li><li>通过它可以进行时钟同步和时间测量</li></ul></li></ol><h4 id="ICMP-差错报告报文的数据字段"><a href="#ICMP-差错报告报文的数据字段" class="headerlink" title="ICMP 差错报告报文的数据字段"></a>ICMP 差错报告报文的数据字段</h4><ul><li>是固定格式的</li><li>把收到的需要进行差错报告的 IP 数据报的首部和数据字段的前 8 个字节提取出来作为 ICMP 报文的数据部分</li><li>提取前 8 个字节是为了得到运输层的端口号和运输层报文的发送序号</li></ul><h3 id="4-4-2-ICMP的应用举例"><a href="#4-4-2-ICMP的应用举例" class="headerlink" title="4.4.2 ICMP的应用举例"></a>4.4.2 ICMP的应用举例</h3><h4 id="PING"><a href="#PING" class="headerlink" title="PING"></a>PING</h4><p><font color="red">PING</font>是 ICMP 的一个重要应用，用于测试两台主机之间的连通性。</p><p>主要特点：</p><ul><li>使用了 ICMP 回送请求和回送回答报文</li><li>会连续发送 4 条回送请求报文</li><li>是应用层直接使用 ICMP 的例子，未经过运输层</li></ul><p>使用方法：</p><ul><li>在 Windows 的 Dos 窗口中键入 <code>ping hostname</code> </li><li>hostname 可以是 IP 地址或域名</li><li>示例：  <code>bash ping www.baidu.com    # 测试与百度之间的连通性 ping 192.168.100.5    # 测试与特定IP地址主机的连通性  </code></li></ul><h4 id="tracert"><a href="#tracert" class="headerlink" title="tracert"></a>tracert</h4><p><font color="red">tracert</font>用来跟踪一个分组从源点到终点的路径。</p><p>工作原理：</p><ul><li>从源主机向目的主机发送一连串的 IP 数据报</li><li>数据报中封装的是无法交付的 UDP 用户数据报</li><li>数据报的特点：<ul><li>第一个数据报的生存时间 TTL 设为 1</li><li>后面的数据报 TTL 依次增长</li><li>当第 i 个数据报到达第 i 个路由器时，TTL 减到 0</li><li>路由器发送 ICMP 时间超过差错报告报文给源主机</li></ul></li></ul><p>通过这种方式可以获得：</p><ul><li>到达目的主机所经过的所有路由器的 IP 地址</li><li>到达每一个路由器的往返时间</li></ul><p>使用方法：</p><ul><li>在 Windows 的 Dos 窗口中键入 <code>tracert hostname</code></li><li>可以查看到主机到目标所经过的所有路由器</li></ul><h3 id="4-5-互联网的路由选择协议"><a href="#4-5-互联网的路由选择协议" class="headerlink" title="4.5 互联网的路由选择协议"></a>4.5 互联网的路由选择协议</h3><h3 id="4-5-1-有关路由选择协议的几个基本概念"><a href="#4-5-1-有关路由选择协议的几个基本概念" class="headerlink" title="4.5.1 有关路由选择协议的几个基本概念"></a>4.5.1 有关路由选择协议的几个基本概念</h3><p>路由选择协议的核心是采用何种算法来获得路由表中的各项目。</p><h4 id="路由选择算法分类"><a href="#路由选择算法分类" class="headerlink" title="路由选择算法分类"></a>路由选择算法分类</h4><ol><li><strong>静态路由选择策略</strong></li><li><strong>动态路由选择策略</strong>：<ul><li>可以较好地适应网络状态的变化</li><li>实现较复杂，适用于大网络</li><li>互联网采用的主要是动态的、分层次的路由选择协议</li></ul></li></ol><h4 id="分层次的路由选择协议"><a href="#分层次的路由选择协议" class="headerlink" title="分层次的路由选择协议"></a>分层次的路由选择协议</h4><p>互联网被划分为许多小的<font color="red">自治系统（AS）</font>：</p><ul><li>一个 AS 是在单一技术管理下的一组路由器</li><li>一个 AS 对另一个 AS 表现出单一和一致的路由选择策略</li><li>目前互联网中，一个大的 ISP 就是一个 AS</li></ul><p>路由选择协议分为两类：</p><ol><li><p><strong>内部网关协议 IGP</strong>：</p><ul><li>如 RIP 和 OSPF 协议</li><li>在一个 AS 内部使用的路由选择协议</li><li>每个 AS 自己决定使用哪种 IGP</li></ul></li><li><p><strong>外部网关协议 EGP</strong>：</p><ul><li>如 BGP-4 协议</li><li>用在不同 AS 之间的路由选择协议</li><li>AS 边界的路由器同时使用 IGP 和 EGP</li></ul></li></ol><h3 id="4-5-2-内部网关协议RIP"><a href="#4-5-2-内部网关协议RIP" class="headerlink" title="4.5.2 内部网关协议RIP"></a>4.5.2 内部网关协议RIP</h3><p><font color="red">RIP</font>是一种分布式的基于距离向量的路由选择协议，最大优点是简单。</p><p>主要特点：</p><ul><li>每个路由器维护从自己到其他每个目的网络的距离记录</li><li>距离以跳数为单位</li><li>选择具有最少路由器的路径</li><li>一条路径最多允许 15 个路由器，因此只适用于小型互联网</li><li>与 OSPF 一样是分布式路由选择协议</li></ul><h4 id="RIP-的工作方式"><a href="#RIP-的工作方式" class="headerlink" title="RIP 的工作方式"></a>RIP 的工作方式</h4><ol><li><p><strong>信息交换</strong>：</p><ul><li>仅和相邻路由器交换信息</li><li>交换的是当前本路由器的完整路由表</li><li>按固定时间间隔交换（如 30s）</li></ul></li><li><p><strong>路由表更新过程</strong>：</p><ul><li>路由器初始路由表为空</li><li>通过不断与相连路由器交换信息更新路由表</li><li>最终所有路由表都会包含：<ul><li>到达本自治系统中任何网络的最短距离</li><li>下一跳路由器的地址</li></ul></li></ul></li></ol><h3 id="4-5-3-内部网关协议OSPF"><a href="#4-5-3-内部网关协议OSPF" class="headerlink" title="4.5.3 内部网关协议OSPF"></a>4.5.3 内部网关协议OSPF</h3><p><font color="red">OSPF</font>是分布式的链路状态协议，适用于大型互联网。</p><p>主要特点：</p><ul><li>只在链路状态发生变化时，才向本自治系统中的所有路由器用洪泛法发送链路状态信息</li><li>链路状态指明：<ul><li>本路由器和哪些路由器相邻</li><li>该链路的度量（可表示费用、距离、时延、带宽等）</li></ul></li><li>所有路由器最终都能建立一个全网的拓扑结构图</li></ul><h3 id="4-5-4-外部网关协议BGP"><a href="#4-5-4-外部网关协议BGP" class="headerlink" title="4.5.4 外部网关协议BGP"></a>4.5.4 外部网关协议BGP</h3><p><font color="red">BGP</font>（BGP-4）的主要特点：</p><ul><li>是不同 AS 的路由器之间交换路由信息的协议</li><li>是一种路径向量路由选择协议</li><li>力求寻找一条能够到达目的网络（可达）且比较好的路由（不兜圈子）</li><li>不追求寻找最佳路由</li></ul><h3 id="4-5-5-路由器的构成"><a href="#4-5-5-路由器的构成" class="headerlink" title="4.5.5 路由器的构成"></a>4.5.5 路由器的构成</h3><h3 id="4-6-IPv6"><a href="#4-6-IPv6" class="headerlink" title="4.6 IPv6"></a>4.6 IPv6</h3><p>背景：</p><ul><li>IPv4 的地址已经耗尽</li><li>IPv6 目前尚未推出标准协议</li></ul><h3 id="4-6-1-IPv6的基本首部"><a href="#4-6-1-IPv6的基本首部" class="headerlink" title="4.6.1 IPv6的基本首部"></a>4.6.1 IPv6的基本首部</h3><p>IPv6 将协议数据单元 PDU 称为<strong>分组</strong>，而非 IP 数据报。</p><h4 id="IPv6-的主要变化"><a href="#IPv6-的主要变化" class="headerlink" title="IPv6 的主要变化"></a>IPv6 的主要变化</h4><ol><li><p><strong>更大的地址空间</strong>：</p><ul><li>地址位数增大到了 128 位</li></ul></li><li><p><strong>扩展的地址层次结构</strong>：</p><ul><li>因为地址空间很大，所以可以划分更多层</li></ul></li><li><p><strong>灵活的首部格式</strong>：</p><ul><li>IPv6 的首部和 IPv4 的首部不兼容</li><li>首部长度是固定的，把选项放在了有效载荷中</li><li>首部改为 8 字节对齐（首部长度应为 8 字节的整数倍）</li></ul></li><li><p><strong>其他改进</strong>：</p><ul><li>允许协议继续扩充</li><li>支持自动配置，不需要 DHCP 协议</li><li>支持资源的预分配</li></ul></li></ol><h4 id="IPv6-数据报结构"><a href="#IPv6-数据报结构" class="headerlink" title="IPv6 数据报结构"></a>IPv6 数据报结构</h4><ul><li>分为<strong>基本首部</strong>和<strong>有效载荷</strong></li><li>有效载荷中允许有 0 个或多个扩展首部</li><li>注意：扩展首部不属于首部</li></ul><h4 id="IPv6-的首部字段"><a href="#IPv6-的首部字段" class="headerlink" title="IPv6 的首部字段"></a>IPv6 的首部字段</h4><ol><li>版本</li><li>通信量类</li><li>流标号</li><li>有效载荷长度</li><li>下一个首部</li><li>跳数限制（等同于 TTL）</li><li>源地址</li><li>目的地址</li></ol><h3 id="4-6-2-IPv6的地址"><a href="#4-6-2-IPv6的地址" class="headerlink" title="4.6.2 IPv6的地址"></a>4.6.2 IPv6的地址</h3><h4 id="IPv6-数据报的目的地址类型"><a href="#IPv6-数据报的目的地址类型" class="headerlink" title="IPv6 数据报的目的地址类型"></a>IPv6 数据报的目的地址类型</h4><ol><li><strong>单播</strong>：点对点通信</li><li><strong>多播</strong>：一点对多点的通信</li><li><strong>任播</strong>：<ul><li>终点是一组计算机</li><li>数据报只交付其中一个（一般是最近的一个）</li></ul></li></ol><h4 id="IPv6-地址格式"><a href="#IPv6-地址格式" class="headerlink" title="IPv6 地址格式"></a>IPv6 地址格式</h4><ul><li>128 位长度</li><li>采用<strong>冒号十六进制计法</strong>：<ul><li>每 16 位用 16 进制表示并用冒号隔开</li><li>共分为 8 段</li><li>每段是一个不超过 4 位的 16 进制数</li></ul></li></ul><h3 id="4-6-3-从IPv4向IPv6过渡"><a href="#4-6-3-从IPv4向IPv6过渡" class="headerlink" title="4.6.3 从IPv4向IPv6过渡"></a>4.6.3 从IPv4向IPv6过渡</h3><p>两种过渡策略：</p><h4 id="1-双协议栈"><a href="#1-双协议栈" class="headerlink" title="1. 双协议栈"></a>1. 双协议栈</h4><ul><li>主机或路由器同时装有 IPv4 和 IPv6 协议栈</li><li>与 IPv6 主机通信时使用 IPv6 地址</li><li>与 IPv4 主机通信时使用 IPv4 地址</li><li>使用域名系统 DNS 来查询目的主机使用哪一种地址</li></ul><h4 id="2-隧道技术"><a href="#2-隧道技术" class="headerlink" title="2. 隧道技术"></a>2. 隧道技术</h4><ul><li>适用场景：源主机和目的主机都采用 IPv6，但中间网络是 IPv4</li><li>工作原理：<ul><li>IPv6 数据报要进入 IPv4 网络时，将其作为数据部分封装到 IPv4 数据报中</li><li>离开 IPv4 网络后再把数据部分取出来</li></ul></li></ul><h3 id="4-6-4-ICMPv6"><a href="#4-6-4-ICMPv6" class="headerlink" title="4.6.4 ICMPv6"></a>4.6.4 ICMPv6</h3><p><font color="red">ICMPv6</font> 是应用于 IPv6 的 ICMP 协议版本，比 ICMPv4 复杂很多，地址解析协议 ARP 和网际组管理协议 IGMP 的功能都合并到了 ICMPv6 中。<br>ICMPv6 是面向报文的协议，利用报文来报告差错、获取信息。</p><h3 id="4-7-IP多播"><a href="#4-7-IP多播" class="headerlink" title="4.7 IP多播"></a>4.7 IP多播</h3><h3 id="4-7-1-IP多播的基本概念"><a href="#4-7-1-IP多播的基本概念" class="headerlink" title="4.7.1 IP多播的基本概念"></a>4.7.1 IP多播的基本概念</h3><p>在一对多的通信中，多播可以比单播节省很多资源。</p><p>主要特点：</p><ul><li>局域网具有硬件多播功能，不需要复制分组就能使所有多播组成员收到分组</li><li>IP 多播所传送的分组需要使用<strong>多播 IP 地址</strong>（D 类地址）</li><li>每个 D 类地址可以标识一个多播组</li><li>多台主机可以加入到一个多播组中共享一个多播地址</li><li>不同网络的主机可以加入到同一个多播组中</li><li>每台主机可以随时加入或离开多播组</li><li>能够运行多播协议的路由器为<strong>多播路由器</strong></li><li>多播地址只能用于目的地址，不能用于源地址</li></ul><p>IP 多播分为两种：</p><ol><li>在本局域网上硬件多播</li><li>在互联网范围内进行多播</li></ol><h3 id="4-7-2-在局域网上进行硬件多播"><a href="#4-7-2-在局域网上进行硬件多播" class="headerlink" title="4.7.2 在局域网上进行硬件多播"></a>4.7.2 在局域网上进行硬件多播</h3><ul><li>多播 IP 地址与以太网硬件地址之间有映射关系，但不是一一对应的</li><li>收到多播数据报的主机需要在 IP 层进行过滤</li></ul><h3 id="4-7-3-网际组管理协议IGMP和多播路由选择协议"><a href="#4-7-3-网际组管理协议IGMP和多播路由选择协议" class="headerlink" title="4.7.3 网际组管理协议IGMP和多播路由选择协议"></a>4.7.3 网际组管理协议IGMP和多播路由选择协议</h3><h4 id="IGMP-协议"><a href="#IGMP-协议" class="headerlink" title="IGMP 协议"></a>IGMP 协议</h4><ul><li>用于让连接在本地局域网上的多播路由器知道本局域网上主机的多播组成员关系变化</li><li>工作在单个本地局域网内部</li><li>IP 多播复杂性：<ul><li>主机随时可能加入或退出某个多播组</li><li>发送多播数据报的主机可以位于多播组内外</li></ul></li></ul><h4 id="IGMP-协议的工作内容："><a href="#IGMP-协议的工作内容：" class="headerlink" title="IGMP 协议的工作内容："></a>IGMP 协议的工作内容：</h4><ol><li><p><strong>加入多播组</strong>：</p><ul><li>主机向多播组的多播地址发送 IGMP 报文</li><li>声明自己成为该组成员</li><li>本地多播路由器转发给其他多播路由器</li></ul></li><li><p><strong>维护组成员关系</strong>：</p><ul><li>组成员关系是动态的</li><li>本地多播路由器周期性探询成员状态</li></ul></li></ol><h4 id="多播路由选择协议"><a href="#多播路由选择协议" class="headerlink" title="多播路由选择协议"></a>多播路由选择协议</h4><p>多播路由选择协议有多种，尚未标准化。</p><p>转发多播数据报的三种方法：</p><ol><li>洪泛与剪除</li><li>隧道技术</li><li>基于核心的发现技术</li></ol><p>目前的多播路由选择协议：</p><ul><li>距离向量多播路由选择协议 DVMRP</li><li>基于核心的转发树 CBT</li><li>开放最短通路优先的多播扩展 MOSPF</li><li>协议无关多播-稀疏方式 PIM-SM</li><li>协议无关多播-密集方式 PIM-DM</li></ul><h3 id="4-8-虚拟专用网VPN和网络地址转换NAT"><a href="#4-8-虚拟专用网VPN和网络地址转换NAT" class="headerlink" title="4.8 虚拟专用网VPN和网络地址转换NAT"></a>4.8 虚拟专用网VPN和网络地址转换NAT</h3><h3 id="4-8-1-虚拟专用网VPN"><a href="#4-8-1-虚拟专用网VPN" class="headerlink" title="4.8.1 虚拟专用网VPN"></a>4.8.1 虚拟专用网VPN</h3><p>背景：</p><ul><li>IP 地址紧缺，引入”本地地址”概念</li><li>本地地址仅在本机构内部有效，不是全球唯一</li><li>又称可重用地址</li></ul><p>本地地址特点：</p><ul><li>只能用于机构内部通信</li><li>不能和互联网上的主机通信</li><li>互联网路由器不转发目的地址为专用地址的数据报</li></ul><p>IPv4 标准规定的专用地址：<br>10.0.0.0 - 10.255.255.255<br>172.16.0.0 - 172.31.255.255<br>192.168.0.0 - 192.168.255.255</p><p><font color="red">虚拟专用网 VPN</font> 特点：</p><ul><li>用于机构分布范围很广的情况</li><li>使用公共互联网作为本机构各专用网之间的通信载体</li><li>通过互联网传送的数据需要加密</li><li>使用隧道技术</li><li>每个场所必须至少有一个合法的全球 IP 地址</li><li>VPN 代理基于此技术</li></ul><h3 id="4-8-2-网络地址转换NAT"><a href="#4-8-2-网络地址转换NAT" class="headerlink" title="4.8.2 网络地址转换NAT"></a>4.8.2 网络地址转换NAT</h3><p><font color="red">网络地址转换 NAT</font> 特点：</p><ul><li>用于实现专用网中的主机到互联网上的主机的通信</li><li>需要在专用网连接到互联网的路由器上安装 NAT 软件</li><li>NAT 路由器至少有一个全球地址</li><li>使用地址转换表存储本地地址与全球地址的对应关系</li><li>通信必须由专用网内的主机发起</li><li>专用网内的主机不能作为服务器</li><li>现代 NAT 转换表还利用端口号，使一个全球地址能服务多个本地地址</li></ul><h3 id="4-9-多协议标记交换MPLS"><a href="#4-9-多协议标记交换MPLS" class="headerlink" title="4.9 多协议标记交换MPLS"></a>4.9 多协议标记交换MPLS</h3>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IP </tag>
            
            <tag> ARP协议 </tag>
            
            <tag> ICMP协议 </tag>
            
            <tag> 路由选择协议 </tag>
            
            <tag> IPv6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>《计算机网络（谢希仁）》- 第三章 数据链路层</title>
      <link href="/2024/12/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%89%E7%AB%A0/%E7%AC%AC%E4%B8%89%E7%AB%A0-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/"/>
      <url>/2024/12/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%89%E7%AB%A0/%E7%AC%AC%E4%B8%89%E7%AB%A0-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/</url>
      
        <content type="html"><![CDATA[<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul><li><a href="#31-%E4%BD%BF%E7%94%A8%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82">3.1 使用点对点信道的数据链路层</a><ul><li><a href="#311-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%92%8C%E5%B8%A7">3.1.1 数据链路和帧</a></li><li><a href="#312-%E4%B8%89%E4%B8%AA%E5%9F%BA%E6%9C%AC%E9%97%AE%E9%A2%98">3.1.2 三个基本问题</a></li></ul></li><li><a href="#32-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEppp">3.2 点对点协议PPP</a><ul><li><a href="#321-ppp%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9">3.2.1 PPP协议的特点</a></li><li><a href="#322-ppp%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B8%A7%E6%A0%BC%E5%BC%8F">3.2.2 PPP协议的帧格式</a></li><li><a href="#323-ppp%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%8A%B6%E6%80%81">3.2.3 PPP协议的工作状态</a></li></ul></li><li><a href="#33-%E4%BD%BF%E7%94%A8%E5%B9%BF%E6%92%AD%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82">3.3 使用广播信道的数据链路层</a><ul><li><a href="#331-%E5%B1%80%E5%9F%9F%E7%BD%91%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82">3.3.1 局域网的数据链路层</a></li><li><a href="#332-csmacd%E5%8D%8F%E8%AE%AE">3.3.2 CSMA&#x2F;CD协议</a></li><li><a href="#333-%E4%BD%BF%E7%94%A8%E9%9B%86%E7%BA%BF%E5%99%A8%E7%9A%84%E6%98%9F%E5%BD%A2%E6%8B%93%E6%89%91">3.3.3 使用集线器的星形拓扑</a></li><li><a href="#334-%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84%E4%BF%A1%E9%81%93%E5%88%A9%E7%94%A8%E7%8E%87">3.3.4 以太网的信道利用率</a></li><li><a href="#335-%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84mac%E5%B1%82">3.3.5 以太网的MAC层</a></li></ul></li><li><a href="#34-%E6%89%A9%E5%B1%95%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91">3.4 扩展的以太网</a><ul><li><a href="#341-%E5%9C%A8%E7%89%A9%E7%90%86%E5%B1%82%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91">3.4.1 在物理层扩展以太网</a></li><li><a href="#342-%E5%9C%A8%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91">3.4.2 在数据链路层扩展以太网</a></li><li><a href="#343-%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91">3.4.3 虚拟局域网</a></li></ul></li><li><a href="#35-%E9%AB%98%E9%80%9F%E4%BB%A5%E5%A4%AA%E7%BD%91">3.5 高速以太网</a><ul><li><a href="#351-100base-t-%E4%BB%A5%E5%A4%AA%E7%BD%91">3.5.1 100BASE-T 以太网</a></li><li><a href="#352-%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91">3.5.2 吉比特以太网</a></li><li><a href="#353-10%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%92%8C%E6%9B%B4%E5%BF%AB%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91">3.5.3 10吉比特以太网和更快的以太网</a></li><li><a href="#354-%E4%BD%BF%E7%94%A8%E4%BB%A5%E5%A4%AA%E7%BD%91%E8%BF%9B%E8%A1%8C%E5%AE%BD%E5%B8%A6%E6%8E%A5%E5%85%A5">3.5.4 使用以太网进行宽带接入</a></li></ul></li></ul><h2 id="本章最重要的内容"><a href="#本章最重要的内容" class="headerlink" title="本章最重要的内容"></a>本章最重要的内容</h2><ul><li><strong>数据链路层的<font color="red">点对点信道</font>和<font color="red">广播信道</font>的特点</strong>。PPP 协议和 CSMA&#x2F;CD 协议的特点。</li><li><strong>数据链路层的三个基本问题</strong>：<font color="red">封装成帧</font>、<font color="red">透明传输</font>、<font color="red">差错检测</font>。</li><li><strong>以太网 MAC 层的硬件地址</strong>。</li><li><font color="red"><strong>适配器</strong></font>、转发器、<font color="red"><strong>集线器</strong></font>、网桥、<font color="red"><strong>以太网交换机</strong></font>的作用和使用场合。</li></ul><blockquote><p>注意：路由器转发分组时只涉及到下面三层。</p></blockquote><h2 id="3-1-使用点对点信道的数据链路层"><a href="#3-1-使用点对点信道的数据链路层" class="headerlink" title="3.1 使用点对点信道的数据链路层"></a>3.1 使用点对点信道的数据链路层</h2><h3 id="3-1-1-数据链路和帧"><a href="#3-1-1-数据链路和帧" class="headerlink" title="3.1.1 数据链路和帧"></a>3.1.1 数据链路和帧</h3><p><strong>数据链路的构成</strong>：</p><ul><li>数据链路既包含<font color="red">物理线路</font>也包含必要的<font color="red">通信协议</font></li><li>将实现协议的软件和硬件加到链路上就构成了数据链路</li></ul><p><strong>网络适配器</strong>：</p><ul><li>常用网络适配器（既包括硬件也包括软件）来实现这些协议</li><li>一般适配器包括了<font color="red">数据链路层</font>和<font color="red">物理层</font>两层的功能</li></ul><p><strong>协议数据单元</strong>：</p><ul><li><font color="red">帧</font>是点对点信道的数据链路层的协议数据单元</li><li><font color="red">IP数据报</font>是网络层的协议数据单元，又称分组</li></ul><p><strong>数据链路层的主要功能</strong>：</p><ul><li>将网络层交下来的数据构成帧发送到链路上</li><li>把接收到的帧里的数据取出并上交给网络层</li></ul><p><img src="/image.png" alt="点对点信道的数据链路层在通信时的主要步骤"></p><p><strong>点对点信道的数据链路层通信步骤</strong>：</p><ol><li>结点A的数据链路层把网络层交下来的IP数据报加上<font color="red">首部</font>和<font color="red">尾部</font>封装成帧</li><li>结点A把封装好的帧发送给结点B</li><li>结点B对接收到的帧进行<font color="red">差错检验</font>：<ul><li>若无差错：从帧中提取出IP数据报上交给网络层</li><li>若有差错：丢弃这个帧</li></ul></li></ol><h3 id="3-1-2-三个基本问题"><a href="#3-1-2-三个基本问题" class="headerlink" title="3.1.2 三个基本问题"></a>3.1.2 三个基本问题</h3><p>数据链路层的三个基本问题：<font color="red">封装成帧</font>、<font color="red">透明传输</font>、<font color="red">差错检测</font></p><h4 id="1-封装成帧"><a href="#1-封装成帧" class="headerlink" title="1. 封装成帧"></a>1. <strong>封装成帧</strong></h4><ul><li>给 IP 数据报加上<font color="red">首部</font>和<font color="red">尾部</font>就构成了数据链路层的帧，IP 数据报成为帧的数据部分</li><li>链路层协议规定了帧中数据部分的长度上限——<font color="red">最大传送单元</font>（MTU）</li><li>首部和尾部包括<font color="red">帧定界符</font>（即确定帧的界限）和其他控制信息</li><li>帧定界符包括：<ul><li><font color="red">开始符</font>（SOH）</li><li><font color="red">结束符</font>（EOT）</li><li>均为一串8位二进制数字</li></ul></li><li>帧定界符的作用：确定帧的界限，当出现差错时可以根据帧定界符识别是否是一个完整的帧</li></ul><h4 id="2-透明传输"><a href="#2-透明传输" class="headerlink" title="2. 透明传输"></a>2. <strong>透明传输</strong></h4><ul><li>透明传输是因为控制字符产生的</li><li><strong>透明传输的定义</strong>：无论传送什么样的数据，都能按照原样无差错地通过数据链路层</li><li><strong>字节填充</strong>：<ul><li>原因：存在帧定界符</li><li>方法：当传输的数据中出现和SOH、EOT等控制字符一样的文本时：<ol><li>在文本前面插入一个<font color="red">转义字符</font>（ESC）</li><li>接收端收到数据后在发送给网络层之前删除这个插入的转义字符</li><li>如果转义字符也出现在数据中，就在它前面再插入一个转义字符</li></ol></li></ul></li></ul><p><img src="/image-1.png" alt="字节填充"></p><h4 id="3-差错检测"><a href="#3-差错检测" class="headerlink" title="3. 差错检测"></a>3. <strong>差错检测</strong></h4><ul><li><strong>比特差错</strong>：传输时产生差错，0变成了1或1变成了0</li><li><strong>误码率BER</strong>：一段时间内，传输错误的比特占所传输比特总数的比率（提升信噪比可以减小误码率）</li><li><strong>差错检验的方法</strong>：<font color="red">循环冗余检验</font>（CRC）</li></ul><p><strong>循环冗余检验的原理</strong>：</p><ol><li>在要传输的数据后加上n位的冗余码（称为<font color="red">帧检验序列FCS</font>）</li><li>让数据乘以2^n（相当于在后面加了n个0）</li><li>然后除以一个事先约定的 n+1 位的除数P，得出 n 位的余数 R 作为冗余码加到数据后面</li><li>接收端将收到的每一个帧除以同样的除数 P：<ul><li>若余数为 0：表明没有差错</li><li>若余数不为 0：表明有差错，丢弃这个帧</li></ul></li></ol><p><strong>重要说明</strong>：</p><ul><li>循环冗余检验使用硬件完成，速度很快</li><li>循环冗余检验只能识别<font color="red">比特差错</font>，无法识别帧丢失、帧重复、帧失序，因此不是可靠传输</li></ul><p><strong>不同传输链路的处理方式</strong>：</p><ol><li><p><strong>通信质量较差的无线传输链路</strong>：</p><ul><li>使用<font color="red">帧编号</font>、<font color="red">确认</font>和<font color="red">重传机制</font></li><li>接收方收到正确的帧就向发送方发送确认</li><li>发送方没收到确认就重传，直到收到确认</li></ul></li><li><p><strong>通信质量较好的有线传输链路</strong>：</p><ul><li>只进行CRC检验</li><li>不使用确认和重传机制</li><li>由上层协议来改正差错</li></ul></li></ol><blockquote><p>注意：本章的 PPP 协议和 CSMA&#x2F;CD 协议都不是可靠传输的协议。</p></blockquote><h2 id="3-2-点对点协议PPP"><a href="#3-2-点对点协议PPP" class="headerlink" title="3.2 点对点协议PPP"></a>3.2 点对点协议PPP</h2><p><font color="red">点对点协议 PPP</font> 是目前点对点链路中应用最广泛的数据链路层协议。</p><h3 id="3-2-1-PPP协议的特点"><a href="#3-2-1-PPP协议的特点" class="headerlink" title="3.2.1 PPP协议的特点"></a>3.2.1 PPP协议的特点</h3><p>PPP 协议是用户和 ISP 通信时使用的数据链路层协议。</p><p><strong>PPP 协议应满足的需求</strong>：</p><ol><li><p><strong>简单</strong></p><ul><li>这是首要的需求</li><li>互联网体系结构中最复杂的部分在 <font color="red">TCP 协议</font>中</li><li>网际协议 IP 和数据链路层协议都不是可靠传输</li></ul></li><li><p><strong><font color="red">封装成帧</font></strong></p><ul><li>PPP 协议规定使用特殊的字符作为帧定界符</li></ul></li><li><p><strong><font color="red">透明传输</font></strong></p></li><li><p><strong>支持多种网络层协议</strong></p><ul><li>PPP 协议要能够在同一条物理链路上同时支持多种网络层协议</li></ul></li><li><p><strong>支持多种类型链路</strong></p><ul><li>包括串行的或并行的、同步的或异步的等</li></ul></li><li><p><strong><font color="red">差错检测</font></strong></p><ul><li>如果收到有错的帧就丢弃</li></ul></li><li><p><strong>最大传送单元</strong></p><ul><li>要为每一种类型的点对点链路设置<font color="red">最大传送单元MTU</font></li></ul></li><li><p><strong>网络层地址协商</strong></p><ul><li>PPP 协议要提供一种机制使通信的两个网络层的实体能通过协商知道彼此的网络层地址</li></ul></li><li><p><strong>数据压缩协商</strong></p><ul><li>PPP 协议要提供一种方法来协商使用数据压缩算法</li></ul></li></ol><p><strong>PPP 协议的组成</strong>：</p><p>PPP 协议有三个组成部分：</p><ol><li>一个将 IP 数据报封装到串行链路的方法</li><li>一个用来建立、配置和测试数据链路连接的<font color="red">链路控制协议LCP</font></li><li>一套<font color="red">网络控制协议 NCP</font>，其中的每一个协议支持不同的网络层协议</li></ol><h3 id="3-2-2-PPP协议的帧格式"><a href="#3-2-2-PPP协议的帧格式" class="headerlink" title="3.2.2 PPP协议的帧格式"></a>3.2.2 PPP协议的帧格式</h3><p><strong>各字段的含义</strong>：</p><p>PPP 的首部和尾部分别为4个字段和2个字段：</p><ul><li><strong>首部字段</strong>：<ul><li>第一个字段：<font color="red">标志字段 F</font>（0x7E），标志着帧的开始</li><li>第二个和第三个字段：目前无实际含义</li><li>第四个字段：2字节的<font color="red">协议字段</font>，表明信息部分的数据类型</li></ul></li><li><strong>尾部字段</strong>：<ul><li>第一个字段：<font color="red">帧检验序列 FCS</font></li><li>第二个字段：标志字段 F（0x7E），标志着帧的结束</li></ul></li></ul><blockquote><p>注意：两个连续的帧之间只需要一个 F，如果连续出现两个标志字段，表示这是一个空帧，应该丢弃。</p></blockquote><p><img src="/image-2.png" alt="PPP协议的帧格式"></p><p><strong>透明传输的实现方式</strong>：</p><ol><li><p><strong>字节填充</strong>：</p><ul><li>PPP 使用异步传输时使用字节填充</li><li>转义符为 0x7D</li></ul></li><li><p><strong>零比特填充</strong>：</p><ul><li>用于 SONET&#x2F;SDH 链路上的同步传输</li><li>方法：当信息字段中出现 5 个连续的 1，立即填入一个 0</li><li>目的：避免出现 6 个连续的 1（PPP 的帧定界符特征）</li></ul></li></ol><h3 id="3-2-3-PPP协议的工作状态"><a href="#3-2-3-PPP协议的工作状态" class="headerlink" title="3.2.3 PPP协议的工作状态"></a>3.2.3 PPP协议的工作状态</h3><p><strong>PPP 链路从建立到释放的全过程</strong>：用户拨号接入 ISP 后，就建立了从用户到 ISP 的物理连接。这时用户向 ISP 发送一系列的链路控制协议 LCP 分组，以便建立 LCP 连接。然后网络控制协议 NCP 给新接入的用户电脑分配一个临时的 IP 地址。等用户通信完毕后，NCP 释放网络层连接，收回分配的 IP 地址，然后 LCP 释放数据链路层连接，最后释放物理层连接。</p><p><strong>PPP 链路的状态变化</strong>：链路静止——链路建立——鉴别——网络层协议——链路打开——链路终止——链路静止。</p><p><strong>各状态说明</strong>：</p><ol><li><p><strong>链路静止</strong>：PPP 链路的起始和终止状态都是链路静止状态。</p></li><li><p><strong>链路建立</strong>：当个人电脑建立了到路由器的物理层连接后，PPP 进入链路建立状态，目的是建立链路层的 <font color="red">LCP 连接</font>。</p><ul><li>通过发送 LCP 的配置请求帧来协商配置选项</li><li>配置请求帧是一个 PPP 帧，协议字段为 LCP 对应的代码</li><li>链路的另一端可以回复：配置确认帧、配置否认帧或配置拒绝帧</li></ul></li><li><p><strong>鉴别</strong>：</p><ul><li>若鉴别身份失败：转到链路终止状态</li><li>若成功：进入网络层协议状态</li></ul></li><li><p><strong>网络层协议</strong>：这时 PPP 链路的两端的<font color="red">网络控制协议 NCP</font>根据网络层的不同协议互相交换网络层特定的网络控制分组。PPP 链路的两端可以运行不同的网络层协议。</p></li><li><p><strong>链路打开</strong>：此时链路的两个 PPP 端点可以彼此发送分组。</p></li><li><p><strong>链路终止</strong>：</p><ul><li>数据传输结束后链路的一端发送终止请求 LCP 帧</li><li>收到终止确认后转到链路终止状态</li><li>终止后进入链路静止状态</li></ul></li></ol><p><img src="/image-3.png" alt="PPP协议的工作状态"></p><blockquote><p>注意：PPP 协议不是纯粹的数据链路层协议，还包含了物理层和网络层的内容。</p></blockquote><h2 id="3-3-使用广播信道的数据链路层"><a href="#3-3-使用广播信道的数据链路层" class="headerlink" title="3.3 使用广播信道的数据链路层"></a>3.3 使用广播信道的数据链路层</h2><p><font color="red">广播信道</font>可以进行一对多的通信，局域网用的就是广播信道。<br>局域网可以按照拓扑结构进行分类。</p><p><img src="/image-4.png" alt="局域网的拓扑结构"></p><h3 id="3-3-1-局域网的数据链路层"><a href="#3-3-1-局域网的数据链路层" class="headerlink" title="3.3.1 局域网的数据链路层"></a>3.3.1 局域网的数据链路层</h3><p><strong>局域网的最主要特点</strong>：网络为一个单位所拥有，且地理范围和站点数目都有限。</p><p><strong>局域网的优点</strong>：</p><ol><li>具有广播功能，可以从一个站点很方便地访问全网</li><li>局域网上的主机可以共享连接在局域网上的各种硬件和软件资源</li><li>便于系统的扩张和逐渐演变</li><li>提高了系统的可靠性、可用性和生存性</li></ol><blockquote><p>注意：<font color="red">以太网</font>是局域网的一种，绝大多数局域网都是以太网。双绞线是局域网中的主流传输媒体。</p></blockquote><p><strong>实现共享信道的两种方法</strong>：</p><ol><li><p><strong>静态划分信道</strong>：</p><ul><li>如频分复用、时分复用、码分复用等</li><li>但不适合局域网</li></ul></li><li><p>**<font color="red">动态媒体接入控制</font>**（又称多点接入）：</p><ul><li>特点是信道并非在用户通信时固定分配给用户</li><li>分为两种方式：<ul><li><strong>随机接入</strong>：用户可以随机发送消息，若发生碰撞则使用 <font color="red">CSMA&#x2F;CD 协议</font>解决</li><li><strong>受控接入</strong>：用户不能随机发送信息而必须服从控制</li></ul></li></ul></li></ol><p><strong>以太网的分层</strong>：</p><ul><li>由于历史原因以太网层被拆分为两个子层：<ul><li><font color="red">逻辑链路控制 LLC</font></li><li><font color="red">媒体接入控制 MAC</font></li></ul></li><li>现在 LLC 基本已经消失，主要是 MAC 协议</li></ul><p><strong>适配器的作用</strong>：</p><ol><li>计算机与外界局域网的连接是通过<font color="red">适配器</font>（网卡）进行的</li><li>实现串行传输和并行传输的转换：<ul><li>适配器和局域网之间：通过电缆或双绞线以串行方式传输</li><li>适配器与计算机之间：通过 I&#x2F;O 总线并行传输</li></ul></li><li>实现数据链路层和物理层的功能：<ul><li>封装成帧、透明传输、差错检错等</li><li>收到正确帧后通过中断通知计算机</li><li>将数据交付给协议栈中的网络层</li></ul></li><li>存储硬件地址，而软件地址（IP地址）存储在计算机中</li></ol><p><img src="/image-5.png" alt="适配器"></p><h3 id="3-3-2-CSMA-CD协议"><a href="#3-3-2-CSMA-CD协议" class="headerlink" title="3.3.2 CSMA&#x2F;CD协议"></a>3.3.2 CSMA&#x2F;CD协议</h3><p>局域网上的计算机常被称为工作站、站点等。</p><p><strong>以太网采取的两种简化措施</strong>：</p><ol><li><p>采用<font color="red">无连接的工作方式</font></p><ul><li>不必建立连接就可以直接发送数据</li><li>适配器对发送的数据帧不编号，也不要求对方发回确认</li><li>提供尽最大努力的交付，是不可靠的交付</li><li>对有差错帧是否重传由高层决定</li></ul></li><li><p>采用<font color="red">CSMA&#x2F;CD协议</font>处理冲突</p><ul><li>同一时间只能有一台计算机发送数据</li><li>如果发生冲突，就使用 CSMA&#x2F;CD 协议来协调</li><li>以太网发送的数据使用曼彻斯特编码</li></ul></li></ol><p><strong>CSMA&#x2F;CD 协议的要点</strong>：</p><ol><li><p><strong><font color="red">多点接入</font></strong></p><ul><li>说明是总线型网络</li><li>许多计算机以多点接入方式连接在一根总线上</li><li>协议的实质是载波监听和碰撞检测</li></ul></li><li><p><strong><font color="red">载波监听</font></strong></p><ul><li>使用电子技术检测信道上有没有其他计算机在发送</li><li>不管是发送前还是发送中，每个站都要不停地检测信道</li></ul></li><li><p><strong><font color="red">碰撞检测</font></strong></p><ul><li>边发送边监听</li><li>如果几个站同时发送数据，总线上的信号电压变化会增大</li><li>发现碰撞后立即停止发送</li></ul></li></ol><p><strong>重要特性</strong>：</p><ul><li>使用 CSMA&#x2F;CD 协议时，不能同时发送和接收</li><li>因此只能进行<font color="red">半双工通信</font>（双向交替通信）</li><li>发生碰撞是因为传播时延（A发送的数据还没传到B处，B就不知道有人发送）</li><li>碰撞后双方都要推迟一段时间重新发送</li><li>以太网存在发送的不确定性</li></ul><p><strong>关键时间概念</strong>：</p><ul><li><font color="red">争用期</font>：发送后最多2θ时间就知道是否碰撞</li><li>如果经过争用期还没碰撞，表明发送成功</li><li>发生碰撞时使用<font color="red">截断二指数退避算法</font>确定重传时机</li></ul><p><strong>重要规定</strong>：</p><ol><li>争用期的时长限制了以太网的地理范围</li><li>最短帧长为64字节（一个争用期可发送的字节数）</li><li>小于64字节的帧为无效帧</li><li>碰撞后要发送人为干扰信号通知所有用户</li><li>帧间最小间隔为96比特时间（让接收方清理缓存）</li></ol><p><img src="/image-6.png" alt="CSMA/CD 协议的要点"></p><p><strong>CSMA&#x2F;CD 协议的工作流程</strong>：</p><ol><li><p><strong>准备发送</strong></p><ul><li>适配器从网络层获得分组</li><li>加上首部和尾部组成以太网帧</li><li>放入适配器缓存</li><li>发送前先检测信道</li></ul></li><li><p><strong>检测信道</strong></p><ul><li>若检测到信道忙：持续检测直到空闲</li><li>若检测到空闲：等待96比特时间后发送</li></ul></li><li><p><strong>发送过程中的检测</strong></p><ul><li><strong>发送成功</strong>：争用期内未检测到碰撞</li><li><strong>发送失败</strong>：<ul><li>争用期内检测到碰撞</li><li>立即停止发送</li><li>发送人为干扰信号</li><li>执行指数退避算法</li><li>重传16次仍失败则向上报错</li></ul></li></ul></li></ol><blockquote><p>注意：以太网发送完一帧后要保留该帧，以备争用期内检测到碰撞时重传。</p></blockquote><h3 id="3-3-3-使用集线器的星形拓扑"><a href="#3-3-3-使用集线器的星形拓扑" class="headerlink" title="3.3.3 使用集线器的星形拓扑"></a>3.3.3 使用集线器的星形拓扑</h3><p>现在的以太网采用<font color="red">星形拓扑</font>，在星形中心使用可靠性非常高的<font color="red">集线器</font>。每个站用两对双绞线，分别用于发送和接收。</p><p><strong>集线器的特点</strong>：</p><ul><li>表面上使用集线器的局域网在<font color="red">物理上是星形网</font>，但在<font color="red">逻辑上仍是总线网</font></li><li>各站共享逻辑上的总线，仍使用 CSMA&#x2F;CD 协议</li><li>一个集线器有很多接口，像是一个多接口的转发器</li><li>集线器工作在物理层，每个接口仅负责转发比特，不进行碰撞检测</li></ul><p><img src="/image-7.png" alt="集线器"></p><h3 id="3-3-4-以太网的信道利用率"><a href="#3-3-4-以太网的信道利用率" class="headerlink" title="3.3.4 以太网的信道利用率"></a>3.3.4 以太网的信道利用率</h3><p><strong>信道利用率特点</strong>：</p><ul><li>因为发生碰撞会浪费信道资源，所以以太网的信道利用率达不到100%</li><li>减少端到端的传播时延可以提高信道利用率，因此：<ul><li>以太网的连线长度不能太长</li><li>以太网的帧长不能太短</li></ul></li></ul><h3 id="3-3-5-以太网的MAC层"><a href="#3-3-5-以太网的MAC层" class="headerlink" title="3.3.5 以太网的MAC层"></a>3.3.5 以太网的MAC层</h3><p><strong>MAC 层的硬件地址</strong>：</p><ul><li>局域网中，硬件地址又叫<font color="red">MAC 地址</font></li><li>IEEE 为局域网规定了一种<font color="red">6 字节的全球地址</font></li><li>固化在适配器中的标识符 <font color="red">EUI-48</font> 就是计算机的硬件地址</li><li>路由器通过适配器连接到局域网时，适配器上的硬件地址标志路由器的一个接口</li></ul><p><strong>局域网中适配器收到的帧分类</strong>：</p><ol><li><strong>单播帧</strong>（一对一）<ul><li>收到的帧的 MAC 地址与本站的地址相同</li></ul></li><li><strong>广播帧</strong>（一对全体）</li><li><strong>多播帧</strong>（一对多）</li></ol><blockquote><p>注意：适配器至少能够识别前两种帧。适配器有一种特殊的<font color="red">混杂方式</font>，可以接收听到的所有帧。</p></blockquote><p><strong>MAC 层的帧格式</strong>：</p><ul><li>最常用的是<font color="red">“以太网V2标准”</font>和 IEEE 802.3 标准</li><li>MAC 帧的组成：<ul><li><strong>首部</strong>：源地址字段、目的地址字段、类型字段</li><li><strong>尾部</strong>：帧检验序列FCS</li></ul></li><li>MAC 帧特点：<ul><li>没有帧定界符和帧长度字段</li><li>最小长度是 64 字节</li><li>数据字段最小长度是 46 字节（不够需填充）</li></ul></li></ul><h2 id="3-4-扩展的以太网"><a href="#3-4-扩展的以太网" class="headerlink" title="3.4 扩展的以太网"></a>3.4 扩展的以太网</h2><p>这种扩展的以太网在网络层看来仍然是一个网络。</p><h3 id="3-4-1-在物理层扩展以太网"><a href="#3-4-1-在物理层扩展以太网" class="headerlink" title="3.4.1 在物理层扩展以太网"></a>3.4.1 在物理层扩展以太网</h3><p><strong>扩展方式</strong>：</p><ul><li>使用<font color="red">光纤</font>扩展主机和集线器间距离<ul><li>因为光纤时延小、带宽宽</li><li>可扩展到几千米</li></ul></li><li>通过<font color="red">主干集线器</font>连接多个以太网</li></ul><p><strong>扩展优缺点</strong>：</p><ul><li><strong>优点</strong>：<ul><li>实现不同以太网间的通信</li><li>扩大地理范围</li></ul></li><li><strong>缺点</strong>：<ul><li>碰撞域增大</li><li>发送数据产生碰撞的概率增加</li></ul></li></ul><p><img src="/image-8.png" alt="多个以太网通过连接进行扩展"></p><h3 id="3-4-2-在数据链路层扩展以太网"><a href="#3-4-2-在数据链路层扩展以太网" class="headerlink" title="3.4.2 在数据链路层扩展以太网"></a>3.4.2 在数据链路层扩展以太网</h3><p>扩展以太网更多是在数据链路层通过<font color="red">以太网交换机</font>（第二层交换机）进行扩展。</p><p><strong>以太网交换机的特点</strong>：</p><ol><li>本质是多接口网桥<ul><li>每个接口直接与主机或另一交换机相连</li><li>一般工作在全双工方式</li></ul></li><li>具有<font color="red">并行性</font><ul><li>可同时连接多对接口</li><li>多对主机可同时通信</li><li>通信主机独占传输媒体，无碰撞</li></ul></li><li>即插即用设备<ul><li>内部帧交换表通过自学习算法建立</li></ul></li></ol><h3 id="3-4-3-虚拟局域网"><a href="#3-4-3-虚拟局域网" class="headerlink" title="3.4.3 虚拟局域网"></a>3.4.3 虚拟局域网</h3><p>使用以太网交换机可以方便地实现<font color="red">虚拟局域网 VLAN</font>。</p><p><strong>VLAN定义</strong>：</p><ul><li>由一些局域网网段构成的与物理位置无关的逻辑组</li><li>这些网段具有某些共同的需求</li><li>每个 VLAN 的帧都有明确的标识符，指明发送该帧的计算机所属的 VLAN</li></ul><blockquote><p>注意：虚拟局域网是局域网给用户提供的一种服务，不是一种新型局域网。</p></blockquote><p><img src="/image-10.png" alt="虚拟局域网"></p><h2 id="3-5-高速以太网"><a href="#3-5-高速以太网" class="headerlink" title="3.5 高速以太网"></a>3.5 高速以太网</h2><p>现在的以太网速率已从传统的 10Mbits&#x2F;s 发展到了 1Gbit&#x2F;s 的吉比特以太网。</p><h3 id="3-5-1-100BASE-T-以太网"><a href="#3-5-1-100BASE-T-以太网" class="headerlink" title="3.5.1 100BASE-T 以太网"></a>3.5.1 100BASE-T 以太网</h3><p><strong>特点</strong>：</p><ul><li>在双绞线上传送 100Mbit&#x2F;s 基带信号的星形拓扑以太网</li><li>又称<font color="red">快速以太网</font></li><li>仍使用 CSMA&#x2F;CD 协议</li><li>可使用以太网交换机<ul><li>使用交换机时工作在全双工状态</li><li>此时不使用 CSMA&#x2F;CD 协议</li></ul></li><li>MAC 帧格式仍使用 IEEE802.3 标准</li></ul><h3 id="3-5-2-吉比特以太网"><a href="#3-5-2-吉比特以太网" class="headerlink" title="3.5.2 吉比特以太网"></a>3.5.2 吉比特以太网</h3><p><strong>主要特点</strong>：</p><ul><li>允许在 1Gbit&#x2F;s 下以<font color="red">全双工</font>和<font color="red">半双工</font>两种方式工作</li><li>使用 IEEE 802.3 协议规定的帧格式</li><li>半双工方式使用 CSMA&#x2F;CD 协议，全双工方式不使用</li><li>与 10BASE-T 和 100BASE-T 向后兼容</li></ul><p><strong>技术创新</strong>：</p><ol><li><p><strong>载波延伸</strong></p><ul><li>在半双工时采用</li><li>延长争用期与MAC帧最小长度到512字节</li><li>发送短帧时需大量填充，造成额外开销</li></ul></li><li><p><strong>分组突发</strong></p><ul><li>用于发送多个短帧时</li><li>第一个短帧采用载波延伸填充</li><li>后续帧一个接一个发送，无需填充</li></ul></li></ol><h3 id="3-5-3-10吉比特以太网和更快的以太网"><a href="#3-5-3-10吉比特以太网和更快的以太网" class="headerlink" title="3.5.3 10吉比特以太网和更快的以太网"></a>3.5.3 10吉比特以太网和更快的以太网</h3><p><strong>10GE特点</strong>：</p><ul><li>帧格式与低速以太网完全相同</li><li>仅工作在<font color="red">全双工方式</font></li><li>不使用 CSMA&#x2F;CD 协议</li><li>传输距离大幅提高</li></ul><p><strong>发展趋势</strong>：</p><ul><li>制定了 40GE 和 100GE 标准</li><li>均工作在全双工方式</li><li>传输距离可达几十千米</li></ul><p><strong>以太网扩展到城域网和广域网的优点</strong>：</p><ol><li>技术成熟</li><li>互操作性好</li><li>价格便宜（比SONET更经济）</li><li>端到端以太网格式统一，无需转换</li></ol><p><strong>以太网的核心优势</strong>：</p><ul><li>可扩展（10Mbit&#x2F;s到10Gbit&#x2F;s）</li><li>灵活（多种媒体、全&#x2F;半双工，共享&#x2F;交换）</li><li>易于安装</li><li>稳健性好</li></ul><h3 id="3-5-4-使用以太网进行宽带接入"><a href="#3-5-4-使用以太网进行宽带接入" class="headerlink" title="3.5.4 使用以太网进行宽带接入"></a>3.5.4 使用以太网进行宽带接入</h3><p><strong>以太网接入特点</strong>：</p><ul><li>提供双向宽带通信</li><li>可灵活升级（如从10M到10G）</li></ul><p><strong>解决方案</strong>：</p><ul><li>问题：以太网帧格式缺少用户认证机制</li><li>解决：使用<font color="red">PPPoE</font><ul><li>在以太网上运行PPP</li><li>将PPP帧封装到以太网中传输</li><li>现代光纤宽带接入（FTTx）普遍采用</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PPP协议 </tag>
            
            <tag> CSMA/CD协议 </tag>
            
            <tag> VLAN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>《计算机网络（谢希仁）》- 第二章 物理层</title>
      <link href="/2024/12/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0/%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E7%89%A9%E7%90%86%E5%B1%82/"/>
      <url>/2024/12/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0/%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E7%89%A9%E7%90%86%E5%B1%82/</url>
      
        <content type="html"><![CDATA[<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul><li><a href="#%E6%9C%AC%E7%AB%A0%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5">本章重要概念</a></li><li><a href="#21-%E7%89%A9%E7%90%86%E5%B1%82%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">2.1 物理层的基本概念</a></li><li><a href="#22-%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">2.2 数据通信的基础知识</a><ul><li><a href="#221-%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A8%A1%E5%9E%8B">2.2.1 数据通信系统的模型</a></li><li><a href="#222-%E6%9C%89%E5%85%B3%E4%BF%A1%E9%81%93%E7%9A%84%E5%87%A0%E4%B8%AA%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">2.2.2 有关信道的几个基本概念</a></li><li><a href="#223-%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F">2.2.3 信道的极限容量</a></li></ul></li><li><a href="#23-%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93">2.3 物理层下面的传输媒体</a><ul><li><a href="#231-%E5%AF%BC%E5%BC%95%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93">2.3.1 导引型传输媒体</a></li><li><a href="#232-%E9%9D%9E%E5%AF%BC%E5%BC%95%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93">2.3.2 非导引型传输媒体</a></li></ul></li><li><a href="#24-%E4%BF%A1%E9%81%93%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF">2.4 信道复用技术</a><ul><li><a href="#241-%E9%A2%91%E5%88%86%E5%A4%8D%E7%94%A8%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8%E5%92%8C%E7%BB%9F%E8%AE%A1%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8">2.4.1 频分复用、时分复用和统计时分复用</a><ul><li><a href="#242-%E6%B3%A2%E5%88%86%E5%A4%8D%E7%94%A8">2.4.2 波分复用</a></li><li><a href="#243-%E7%A0%81%E5%88%86%E5%A4%8D%E7%94%A8">2.4.3 码分复用</a></li></ul></li></ul></li><li><a href="#25-%E6%95%B0%E5%AD%97%E4%BC%A0%E8%BE%93%E7%B3%BB%E7%BB%9F">2.5 数字传输系统</a></li><li><a href="#26-%E5%AE%BD%E5%B8%A6%E6%8E%A5%E5%85%A5%E6%8A%80%E6%9C%AF">2.6 宽带接入技术</a><ul><li><a href="#261-adsl%E6%8A%80%E6%9C%AF">2.6.1 ADSL技术</a></li><li><a href="#262-%E5%85%89%E7%BA%A4%E5%90%8C%E8%BD%B4%E6%B7%B7%E5%90%88%E7%BD%91hfc%E7%BD%91">2.6.2 光纤同轴混合网(HFC网)</a></li><li><a href="#263-fttx%E6%8A%80%E6%9C%AF">2.6.3 FTTx技术</a></li></ul></li></ul><h2 id="本章重要概念"><a href="#本章重要概念" class="headerlink" title="本章重要概念"></a>本章重要概念</h2><ol><li>物理层的任务</li><li>几种常用的信道复用技术</li><li>几种常用的宽带接入技术，主要是 ADSL 和 FTTx</li></ol><h2 id="2-1-物理层的基本概念"><a href="#2-1-物理层的基本概念" class="headerlink" title="2.1 物理层的基本概念"></a>2.1 物理层的基本概念</h2><p>物理层关注的是如何在连接各种计算机的传输媒体上传输数据流。<strong>物理层的主要任务是尽可能屏蔽掉不同传输媒体和通信手段间的差异，使链路层感受不到这种差异。</strong></p><p>物理层的主要任务是确定与传输媒体的接口有关的一些特性：</p><ol><li><strong>机械特性</strong>：指明接口所用接线器的形状、尺寸等机械特性</li><li><strong>电气特性</strong>：指明接口电缆的各条线上的电压的范围</li><li><strong>功能特性</strong>：指明电线上某一电平的电压的意义</li><li><strong>过程特性</strong>：指明不同功能的各种可能事件的出现顺序</li></ol><p>重要补充说明：</p><ul><li><font color="red">数据在计算机内部一般是并行传输，但在通信线路上是串行传输</font>，所以物理层还要完成传输方式的转换</li><li>物理层协议很多，因为物理连接的方式很多，传输媒体的种类也很多</li></ul><h2 id="2-2-数据通信的基础知识"><a href="#2-2-数据通信的基础知识" class="headerlink" title="2.2 数据通信的基础知识"></a>2.2 数据通信的基础知识</h2><h3 id="2-2-1-数据通信系统的模型"><a href="#2-2-1-数据通信系统的模型" class="headerlink" title="2.2.1 数据通信系统的模型"></a>2.2.1 数据通信系统的模型</h3><p>数据通信系统可以划分为三个主要部分：</p><ol><li><p><strong>源系统</strong>（发送端）</p><ul><li>包括：源点和发送器</li><li>典型的发送器是<font color="red">调制器</font></li></ul></li><li><p><strong>传输系统</strong>（传输网络）</p></li><li><p><strong>目的系统</strong>（接收端）</p><ul><li>包括：接收器和终点</li><li>典型的接收器是<font color="red">解调器</font></li></ul></li></ol><p>通信的基本概念：</p><ul><li><strong>通信目的</strong>：传送消息</li><li><strong>数据</strong>：<font color="red">运送消息的实体</font></li><li><strong>信号</strong>：<font color="red">数据的电气或电磁的表现</font></li></ul><p>信号的分类：</p><ul><li><strong>模拟信号</strong></li><li><strong>数字信号</strong></li></ul><h3 id="2-2-2-有关信道的几个基本概念"><a href="#2-2-2-有关信道的几个基本概念" class="headerlink" title="2.2.2 有关信道的几个基本概念"></a>2.2.2 有关信道的几个基本概念</h3><p><strong>信道不等于电路</strong>，信道表示向某一方向传送信息的媒体，一条通信电路通常包含<font color="red">一条发送信道和一条接收信道</font>。</p><h4 id="通信方式"><a href="#通信方式" class="headerlink" title="通信方式"></a>通信方式</h4><p>信息交互有以下三种基本方式：</p><ol><li><p><strong>单向通信</strong>（单工通信）</p><ul><li>如有线电广播等</li><li>需要<font color="red">一条信道</font></li></ul></li><li><p><strong>双向交替通信</strong>（半双工通信）</p><ul><li>需要<font color="red">两条信道</font></li></ul></li><li><p><strong>双向同时通信</strong>（全双工通信）</p><ul><li>需要<font color="red">两条信道</font></li></ul></li></ol><h4 id="调制"><a href="#调制" class="headerlink" title="调制"></a>调制</h4><p>来自信源的信号称为<strong>基带信号</strong>。因为基带信号中包含较多低频成分，而许多信道不能传输低频分量和直流分量，所以需要对基带信号调制。</p><p>调制可分为两大类：</p><ol><li><strong>基带调制</strong>：将数字信���转换为另一种数字信号（又称编码）</li><li><strong>带通调制</strong>：将基带信号的频率范围转换为另一频段，并化为模拟信号</li></ol><h4 id="常用编码方式"><a href="#常用编码方式" class="headerlink" title="常用编码方式"></a>常用编码方式</h4><p><img src="/image.png" alt="alt text"></p><ol><li><strong>不归零制</strong><ul><li>正电平代表1，负电平代表0</li></ul></li><li><strong>归零制</strong><ul><li>正脉冲代表1，负脉冲代表0</li></ul></li><li><strong>曼彻斯特编码</strong><ul><li>位周期中心的向上跳变代表0，向下跳变代表1</li></ul></li><li><strong>差分曼彻斯特编码</strong><ul><li>每一位的中心都有跳变</li><li>位开始的边界有跳变代表0，没有代表1</li></ul></li></ol><p>重要特性：<font color="red">曼彻斯特码的频率比不归零制高，但有自同步能力，即可以从信号波形自身中提取信号时钟频率</font><br><img src="/image-1.png" alt="alt text"></p><h3 id="2-2-3-信道的极限容量"><a href="#2-2-3-信道的极限容量" class="headerlink" title="2.2.3 信道的极限容量"></a>2.2.3 信道的极限容量</h3><p><strong>数字通信的优点</strong>：信号在信道上传输时必然会失真，但只要能识别出原有信号，就没有影响。</p><p>影响因素：</p><ul><li>传输速率越高，或距离越远，或噪声越大，失真就越严重</li></ul><h4 id="信道的频率范围"><a href="#信道的频率范围" class="headerlink" title="信道的频率范围"></a>信道的频率范围</h4><ul><li>信道中码元传输的速率有上限，超过上限会出现<font color="red">严重的码间串扰问题</font>，接收端无法识别编码</li><li><strong>信道的频带越宽，能通过的高频分量越多，最大速率越高</strong></li></ul><h4 id="信噪比"><a href="#信噪比" class="headerlink" title="信噪比"></a>信噪比</h4><ul><li>定义：信号的平均功率与噪声的平均功率之比</li><li>表示：写作 S&#x2F;N，单位是分贝（dB）</li><li>计算：<font color="red">信噪比 &#x3D; 10 log10(S&#x2F;N)</font></li></ul><h4 id="香农公式"><a href="#香农公式" class="headerlink" title="香农公式"></a>香农公式</h4><ol><li>公式：<font color="red">信道的极限传输速率 C &#x3D; W log(2+S&#x2F;N)</font></li><li>重要结论：<ul><li><strong>带宽越大，信噪比越大，极限传输速率越高</strong></li><li>只要信息传输速率低于信道的极限速率，就一定可以实现无差错传输（但方法未知）</li></ul></li></ol><h4 id="提高传输速率的方法"><a href="#提高传输速率的方法" class="headerlink" title="提高传输速率的方法"></a>提高传输速率的方法</h4><ol><li>增大带宽</li><li>提高信噪比</li><li><strong>通过编码让每个码元携带更多比特的信息</strong></li></ol><h2 id="2-3-物理层下面的传输媒体"><a href="#2-3-物理层下面的传输媒体" class="headerlink" title="2.3 物理层下面的传输媒体"></a>2.3 物理层下面的传输媒体</h2><p>传输媒体分为导引型和非导引型两大类。</p><ul><li><strong>导引型</strong>中电磁波沿着固体媒体传播</li><li><strong>非导引型</strong>中传输媒体就是自由空间，又称无线传输</li></ul><h3 id="2-3-1-导引型传输媒体"><a href="#2-3-1-导引型传输媒体" class="headerlink" title="2.3.1 导引型传输媒体"></a>2.3.1 导引型传输媒体</h3><p>导引型传输媒体有：</p><ol><li>架空明线</li><li>双绞线</li><li>同轴电缆</li><li>光纤</li></ol><p>重要特性：<font color="red">光纤的传输带宽远大于其他传输媒体的带宽</font></p><h3 id="2-3-2-非导引型传输媒体"><a href="#2-3-2-非导引型传输媒体" class="headerlink" title="2.3.2 非导引型传输媒体"></a>2.3.2 非导引型传输媒体</h3><p>主要特点：</p><ul><li><font color="red">利用无线信道进行传输是运动中通信的唯一手段</font></li><li>短波通信质量较差，速率较低</li><li>无线电微波通信可传输电话、图像、数据等信息</li><li>紫外线及更高波段目前还不能用于通信</li></ul><p>卫星通信特点：</p><ul><li><strong>优点</strong>：通信距离远</li><li><strong>缺点</strong>：传播时延高，保密性差</li></ul><h2 id="2-4-信道复用技术"><a href="#2-4-信道复用技术" class="headerlink" title="2.4 信道复用技术"></a>2.4 信道复用技术</h2><p><strong>信道复用</strong>：多个发送端使用同一条信道来传输信息</p><ul><li>发送端使用<strong>复用器</strong>将不同的信息合起来传输</li><li>接收端使用<strong>分用器</strong>将信息分开</li></ul><h3 id="2-4-1-频分复用、时分复用和统计时分复用"><a href="#2-4-1-频分复用、时分复用和统计时分复用" class="headerlink" title="2.4.1 频分复用、时分复用和统计时分复用"></a>2.4.1 频分复用、时分复用和统计时分复用</h3><p>三种复用方式：</p><ol><li><p>**频分复用(FDM)**：</p><ul><li>每个用户分配一个频带，通信中始终占用该频带</li><li><font color="red">用户在同样时间占用不同的频带</font></li></ul></li><li><p>**时分复用(TDM)**：</p><ul><li>将时间划分为等长的帧，每个用户占用固定序号的间隙</li><li><font color="red">用户在不同时间占用同样的频带</font></li><li>缺点：因计算机数据突发性，信道利用率较低</li></ul></li><li><p>**统计时分复用(STDM)**：</p><ul><li>一种改进的时分复用，又称异步时分复用</li><li><font color="red">不是固定分配时隙，而是按需动态分配时隙</font></li></ul></li></ol><h3 id="2-4-2-波分复用"><a href="#2-4-2-波分复用" class="headerlink" title="2.4.2 波分复用"></a>2.4.2 波分复用</h3><p>**波分复用(WDM)**：</p><ul><li>本质是<font color="red">光的频分复用</font></li><li>一根光纤可复用几十路甚至更多的光载波信号</li><li>需要使用光纤放大器补偿传输衰减</li></ul><h3 id="2-4-3-码分复用"><a href="#2-4-3-码分复用" class="headerlink" title="2.4.3 码分复用"></a>2.4.3 码分复用</h3><p>**码分复用(CDM)**：</p><ul><li><font color="red">不同用户使用不同码型，在同样时间使用同样的频带通信</font></li><li>用户码片序列示例：<ul><li>序列00011011表示比特1</li><li>序列11100100表示比特0</li><li>不同用户的码片序列必须相互正交</li></ul></li><li>特点：<ul><li>是一种扩频通信</li><li>无线局域网中常用</li></ul></li></ul><h2 id="2-5-数字传输系统"><a href="#2-5-数字传输系统" class="headerlink" title="2.5 数字传输系统"></a>2.5 数字传输系统</h2><p>重要特点：</p><ul><li><strong>数字通信</strong>相比模拟通信，在传输质量和经济上都更好</li><li><font color="red">光纤是长途干线最主要的传输媒体</font></li><li><strong>SONET&#x2F;SDH标准</strong>（同步数字序列SDH和同步光纤网SONET）是当前最主要的数字传输国际标准</li></ul><h2 id="2-6-宽带接入技术"><a href="#2-6-宽带接入技术" class="headerlink" title="2.6 宽带接入技术"></a>2.6 宽带接入技术</h2><p>基本概念：</p><ul><li>用户连接互联网需先连接到ISP，获得IP地址</li><li><strong>宽带接入网</strong>是一种用来把用户接入到互联网的网络</li><li>分类：有线宽带接入和无线宽带接入</li></ul><h3 id="2-6-1-ADSL技术"><a href="#2-6-1-ADSL技术" class="headerlink" title="2.6.1 ADSL技术"></a>2.6.1 ADSL技术</h3><p><strong>ADSL</strong>（非对称数字用户线）的主要特点：</p><ol><li><font color="red">利用现有电话线，4000Hz以下给传统电话，4000Hz以上用于上网</font></li><li><strong>非对称特性</strong>：下行带宽远大于上行带宽（因用户主要是下载）</li><li>频带分配：<ul><li>25个子信道用于上行</li><li>249个子信道用于下行</li></ul></li></ol><p>优缺点：</p><ul><li><strong>优点</strong>：可利用现有电话线</li><li><strong>缺点</strong>：<ul><li>传输距离有限</li><li>不能保证固定数据率</li><li>速率依赖于线路质量、长度、线径等</li></ul></li></ul><h3 id="2-6-2-光纤同轴混合网-HFC网"><a href="#2-6-2-光纤同轴混合网-HFC网" class="headerlink" title="2.6.2 光纤同轴混合网(HFC网)"></a>2.6.2 光纤同轴混合网(HFC网)</h3><p><strong>HFC网</strong>特点：</p><ol><li>基于有线电视网改造</li><li><font color="red">将同轴电缆主干改为光纤，提高传输可靠性和质量</font></li><li>技术参数：<ul><li>光纤节点到头端距离：25km</li><li>到用户距离上限：3km</li><li>每个光纤节点可连接用户数：500</li></ul></li></ol><p><img src="/image-2.png" alt="alt text"></p><p>重要说明：</p><ul><li>需要使用电缆调制解调器（比ADSL解调器复杂）</li><li><font color="red">数据率不固定，取决于同时使用的用户数量</font></li></ul><h3 id="2-6-3-FTTx技术"><a href="#2-6-3-FTTx技术" class="headerlink" title="2.6.3 FTTx技术"></a>2.6.3 FTTx技术</h3><p><strong>FTTH</strong>（光纤到户）特点：</p><ol><li><font color="red">光纤直接铺设到用户家庭，上网速率最快</font></li><li>使用波分复用技术：<ul><li>多用户共享一根光纤干线</li><li>上行下行使用不同波长</li></ul></li></ol><p>FTTx类型：</p><ol><li><strong>FTTH</strong>：光纤到户</li><li><strong>FTTB</strong>：光纤到大楼</li><li><strong>FTTF</strong>：光纤到楼层</li></ol><p>注意：<font color="red">运营商所说的”光纤到户”通常并非真正的FTTH</font></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 物理层 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>os-测试</title>
      <link href="/2024/12/09/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/os-1/"/>
      <url>/2024/12/09/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/os-1/</url>
      
        <content type="html"><![CDATA[<p>这是关于操作系统基本概念的第一篇文章</p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 操作系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 进程管理 </tag>
            
            <tag> 内存管理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>《计算机网络（谢希仁）》- 第一章 概述</title>
      <link href="/2024/12/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/"/>
      <url>/2024/12/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul><li><a href="#%E6%9C%AC%E7%AB%A0%E7%9A%84%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5">本章的重要概念</a></li><li><a href="#11-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%97%B6%E4%BB%A3%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8">1.1 计算机网络在信息时代中的作用</a></li><li><a href="#12-%E4%BA%92%E8%81%94%E7%BD%91%E6%A6%82%E8%BF%B0">1.2 互联网概述</a><ul><li><a href="#121-%E7%BD%91%E7%BB%9C%E7%9A%84%E7%BD%91%E7%BB%9C">1.2.1 网络的网络</a></li><li><a href="#122-%E4%BA%92%E8%81%94%E7%BD%91%E5%9F%BA%E7%A1%80%E7%BB%93%E6%9E%84%E5%8F%91%E5%B1%95%E7%9A%84%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5">1.2.2 互联网基础结构发展的三个阶段</a></li><li><a href="#123-%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E6%A0%87%E5%87%86%E5%8C%96%E5%B7%A5%E4%BD%9C">1.2.3 互联网的标准化工作</a></li></ul></li><li><a href="#13-%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E7%BB%84%E6%88%90">1.3 互联网的组成</a><ul><li><a href="#131-%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E8%BE%B9%E7%BC%98%E9%83%A8%E5%88%86">1.3.1 互联网的边缘部分</a></li><li><a href="#132-%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E6%A0%B8%E5%BF%83%E9%83%A8%E5%88%86">1.3.2 互联网的核心部分</a></li><li><a href="#133-%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F">1.3.3 三种交换方式</a></li></ul></li><li><a href="#15-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E7%B1%BB%E5%88%AB">1.5 计算机网络的类别</a><ul><li><a href="#151-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E5%AE%9A%E4%B9%89">1.5.1 计算机网络的定义</a></li><li><a href="#152-%E5%87%A0%E7%A7%8D%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%88%AB%E7%9A%84%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C">1.5.2 几种不同类别的计算机网络</a></li></ul></li><li><a href="#16-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD">1.6 计算机网络的性能</a><ul><li><a href="#161-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87">1.6.1 计算机网络的性能指标</a></li><li><a href="#162-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E9%9D%9E%E6%80%A7%E8%83%BD%E7%89%B9%E5%BE%81">1.6.2 计算机网络的非性能特征</a></li></ul></li><li><a href="#17-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84">1.7 计算机网络体系结构</a><ul><li><a href="#171-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E7%9A%84%E5%BD%A2%E6%88%90">1.7.1 计算机网络体系结构的形成</a></li><li><a href="#172-%E5%8D%8F%E8%AE%AE%E4%B8%8E%E5%88%92%E5%88%86%E5%B1%82%E6%AC%A1">1.7.2 协议与划分层次</a></li><li><a href="#173-%E5%85%B7%E6%9C%89%E4%BA%94%E5%B1%82%E5%8D%8F%E8%AE%AE%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84">1.7.3 具有五层协议的体系结构</a></li><li><a href="#174-%E5%AE%9E%E4%BD%93%E5%8D%8F%E8%AE%AE%E6%9C%8D%E5%8A%A1%E5%92%8C%E6%9C%8D%E5%8A%A1%E8%AE%BF%E9%97%AE%E7%82%B9">1.7.4 实体、协议、服务和服务访问点</a></li><li><a href="#175-tcpip%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84">1.7.5 TCP&#x2F;IP的体系结构</a></li></ul></li></ul><h2 id="本章的重要概念"><a href="#本章的重要概念" class="headerlink" title="本章的重要概念"></a>本章的重要概念</h2><ul><li><p>互联网采用存储转发的分组交换技术和三层 ISP 结构</p></li><li><p>互联网按工作方式划分为边缘部分和核心部分：</p><ul><li>主机在边缘部分，作用是进行信息处理。</li><li>路由器在核心部分，作用是按存储转发方式进行分组交换。</li></ul></li><li><p>计算机网络最常用的 7 个性能指标：<strong>速率</strong>，<strong>带宽</strong>，<strong>吞吐量</strong>，<strong>时延</strong>，<strong>时延带宽积</strong>，<strong>往返时间</strong>，<strong>信道利用率</strong>。</p></li><li><p>协议是为进行网络中的数据交换建立的规则。计算机网络的各层和其协议的集合称为网络的体系结构。</p></li><li><p>五层的体系结构包括：<strong>应用层、运输层、网络层、数据链路层、物理层</strong>。运输层最重要的协议是 TCP 和 UDP 协议，网络层最重要的协议是 IP 协议。</p></li><li><p>计算机网络（简称网络）把许多计算机连接在一起。互连网把许多网络连接在一起，是网络的网络。</p></li><li><p>internet 是互连网，通用名词，泛指网络。Internet 是互联网，专用名词，特指全球最大的互连网。</p></li><li><p>互联网采用 TCP&#x2F;IP 协议族作为通信规则，前身是美国的 ARPANET。</p></li><li><p>计算机通信是<strong>计算机中的进程</strong>(即运行着的程序)之间的通信。网络的通信方式是客户-服务器方式和对等连接方式。</p></li><li><p>客户和服务器都是通信中所涉及的应用进程。客户是服务请求方，服务器是服务提供方。</p></li><li><p>计算机网络按作用范围分为广域网（WAN），城域网，局域网（LAN），个人区域网（PAN）</p></li></ul><h2 id="1-1-计算机网络在信息时代中的作用"><a href="#1-1-计算机网络在信息时代中的作用" class="headerlink" title="1.1 计算机网络在信息时代中的作用"></a>1.1 计算机网络在信息时代中的作用</h2><ul><li>常见的网络有三大类：电信网络、有线电视网络、计算机网络。其中计算机网络是核心。</li><li>互联网即因特网，是 Internet 的译名（注意不是 internet）</li><li>互联网是由数量极大的各种计算机网络互连起来的。</li><li>互联网的两个基本特点：连通性、共享</li><li>互联网+ 的含义：互联网 + 各个传统行业</li></ul><h2 id="1-2-互联网概述"><a href="#1-2-互联网概述" class="headerlink" title="1.2 互联网概述"></a>1.2 互联网概述</h2><h3 id="1-2-1-网络的网络"><a href="#1-2-1-网络的网络" class="headerlink" title="1.2.1 网络的网络"></a>1.2.1 网络的网络</h3><ul><li>计算机网络由多个结点和连接结点的链路组成。结点可以是计算机、集线器、交换机或路由器等。</li><li>网络之间可以通过路由器互连起来构成网络的网络，称为互连网。</li><li>网络把许多计算机连接在一起，互连网则把许多网络通过路由器连接在一起。与网络相连的计算机称为主机。</li></ul><h3 id="1-2-2-互联网基础结构发展的三个阶段"><a href="#1-2-2-互联网基础结构发展的三个阶段" class="headerlink" title="1.2.2 互联网基础结构发展的三个阶段"></a>1.2.2 互联网基础结构发展的三个阶段</h3><ul><li>internet 是互连网，通用名词，泛指网络。互连网之间的通信协议可以任意选择，不一定是 TCP&#x2F;IP</li><li>Internet 是互联网，专用名词，特指全球最大的互连网。互联网采用 TCP&#x2F;IP 协议族作为通信规则，前身是美国的 ARPANET。</li><li>现在的互联网是多层次 ISP 结构：分为主干ISP、地区ISP、本地ISP。</li><li>ISP 即互联网服务提供商，中国电信、中国联通、中国移动都是 ISP。</li><li>上网就是指接入到互联网。主机必须有 IP 地址才能上网。</li><li>ISP 从互联网管理机构申请到很多 IP 地址，同时拥有通信线路及路由器等联网设备。</li><li>用户向 ISP 交纳费用获得所需 IP 地址的使用权，然后就可以通过该 ISP 接入互联网。</li><li>互联网由全球无数的 ISP 所共同拥有。</li><li><font color="red">万维网（WWW）是基于互联网开发的一种信息共享服务，浏览网址一般使用的就是万维网，而邮件等就没有用到万维网。</font></li></ul><h3 id="1-2-3-互联网的标准化工作"><a href="#1-2-3-互联网的标准化工作" class="headerlink" title="1.2.3 互联网的标准化工作"></a>1.2.3 互联网的标准化工作</h3><p>所有的互联网标准都以 RFC 文档的形式发表在互联网上。互联网上有很多 RFC 文档，但只有少部分是互联网标准</p><h2 id="1-3-互联网的组成"><a href="#1-3-互联网的组成" class="headerlink" title="1.3 互联网的组成"></a>1.3 互联网的组成</h2><p>互联网按工作方式划分为边缘部分和核心部分：</p><ol><li>边缘部分：由连接到互联网的主机组成，作用是<strong>进行信息处理</strong>。</li><li>核心部分：由大量网络和连接网络的路由器组成，作用是<strong>按存储转发方式进行分组交换</strong>，为边缘部分提供通信服务。</li></ol><h3 id="1-3-1-互联网的边缘部分"><a href="#1-3-1-互联网的边缘部分" class="headerlink" title="1.3.1 互联网的边缘部分"></a>1.3.1 互联网的边缘部分</h3><p>主机又称端系统，个人电脑、摄像头、手机等都属于端系统。<br>边缘部分利用核心部分提供的服务进行通信，一般称为计算机之间通信。<br>计算机之间的通信实际上是<strong>计算机 A 上某个进程与计算机 B 上另一个进程之间的通信</strong>。<br>通信方式主要有两类：客户-服务器方式、对等方式（P2P）。</p><h3 id="1-3-2-互联网的核心部分"><a href="#1-3-2-互联网的核心部分" class="headerlink" title="1.3.2 互联网的核心部分"></a>1.3.2 互联网的核心部分</h3><p><font color="red">核心部分最重要的功能是分组交换，主要组件是路由器。</font><br>路由器是实现分组交换的关键构件，<font color="red">用来转发分组。</font><br><strong>分组交换</strong><br>要发送的整块数据称为一个报文。将报文分为多个数据段，每个数据段加上一个首部（包头）构成一个分组（包）。<br>分组交换采用<strong>存储转发技术</strong>。路由器收到分组后，先暂时存储，检查首部，查找转发表，然后按照首部中的目的地址，找到合适的接口转发给下一个路由器，这样一步步交付给最终的目的主机。<br>首部中主要包含着<font color="red">目的地址、源地址等控制信息。</font><br><font color="red">分组是在互联网中传送的数据单元。</font></p><h3 id="1-3-3-三种交换方式"><a href="#1-3-3-三种交换方式" class="headerlink" title="1.3.3 三种交换方式"></a>1.3.3 三种交换方式</h3><ol><li>电路交换：有三个步骤：建立连接（占用通信资源，一条专用的物理通路）、通话（一直占用通信资源）、释放连接（归还通信资源）<br>缺点：在通话的全部时间内始终占用端到端的通信资源。<br>应用：电话使用的就是电路交换。而互联网数据因为其突发性，使用电路交换的话效率很低。</li><li>报文交换：整个报文先传送到相邻结点，全部存储下来后查找转发表，转发到下一个结点。</li><li>分组交换：单个分组传送到相邻结点，存储下来后查找转发表，转发到下一个结点。<br><img src="/image.png" alt="alt text"></li></ol><h2 id="1-5-计算机网络的类别"><a href="#1-5-计算机网络的类别" class="headerlink" title="1.5 计算机网络的类别"></a>1.5 计算机网络的类别</h2><h3 id="1-5-1-计算机网络的定义"><a href="#1-5-1-计算机网络的定义" class="headerlink" title="1.5.1 计算机网络的定义"></a>1.5.1 计算机网络的定义</h3><p>计算机网络并非专门用来传送数据，还支持很多其他应用。</p><h3 id="1-5-2-几种不同类别的计算机网络"><a href="#1-5-2-几种不同类别的计算机网络" class="headerlink" title="1.5.2 几种不同类别的计算机网络"></a>1.5.2 几种不同类别的计算机网络</h3><ul><li>广域网WAN：互联网的核心部分，连接广域网各结点的一般使高速链路。</li><li>城域网MAN：很多城域网采用的是以太网技术，常入局域网进行讨论</li><li>局域网LAN：一般通过高速通信线路相连，地理范围较小。校园网、企业为一般为局域网</li><li>个人区域网PAN：范围很小，一般在 10m 左右。</li></ul><p><strong>接入网</strong><br>接入网 AN 是用来把用户接入到互联网的网络。<br>接入网既不属于核心部分，也不属于边缘部分，<font color="red">而是位于端系统到互联网中第一个路由器之间的一种网络。</font><br>宽带接入网就是一种接入网。</p><h2 id="1-6-计算机网络的性能"><a href="#1-6-计算机网络的性能" class="headerlink" title="1.6 计算机网络的性能"></a>1.6 计算机网络的性能</h2><h3 id="1-6-1-计算机网络的性能指标"><a href="#1-6-1-计算机网络的性能指标" class="headerlink" title="1.6.1 计算机网络的性能指标"></a>1.6.1 计算机网络的性能指标</h3><p>常用的 7 个性能指标：</p><ol><li>速率</li><li>带宽</li><li>吞吐量</li><li>时延</li><li>时延带宽积</li><li>往返时间</li><li>利用率</li></ol><p><strong>速率</strong><br>速率是计算机网络中最重要的性能指标。<br>速率是数据的传送速率，单位是 bit&#x2F;s，有时也写为 bps。<br><font color="red">1G 速率实际上是 1Gbit&#x2F;s 而不是 1Gbyte&#x2F;s。提到网络速率时，一般指的是额定速率或标称速率。</font></p><p><strong>带宽</strong><br>带宽有两种意义：</p><ol><li>某个信号具有的频带宽度，是一个赫兹范围。表示某信道允许通过的信号频带范围就称为该信道的带宽。是频域称谓</li><li>计算机网络中，带宽表示网络中某通道传送数据的能力，网络带宽表示单位时间内网络中的某信道所能通过的最高数据率，单位是 bit&#x2F;s。是时域称谓。</li></ol><p><strong>吞吐量</strong><br>吞吐量表示<font color="red">单位时间内通过某个网络的<strong>实际的数据量</strong>。</font>经常用于对现实世界中的网络的一种测量。<br>吞吐量受网络的带宽或定速率的限制。</p><p><strong>时延</strong><br>时延是数据从网络的一端传送到另一端所需的时间。<br>网络中的时延由以下几个不同的部分组成：</p><ol><li>发送时延：主机或路由器发送数据帧所需的时间，即从发送数据帧的第一个比特到最后一个比特发送完毕的时间，也叫传输时延。<br>计算公式：发送时延 &#x3D; 数据帧长度&#x2F;发送速率。<br>发送速率越快，发送时延越低。</li><li>传播时延：传播时延是电磁波在信道中传播一定的距离花费的时间。<br>计算公式：传播时延 &#x3D; 信道长度 &#x2F; 电磁波在信道上的传输速率。<br>电磁波在网络中的传输速率比真空中低，在铜线中为 2.3 亿米每秒，在光纤中是 2 亿米每秒。<br>距离越长，传输时延越长。</li><li>处理时延：主机或路由器在收到分组时要花费时间处理数据，如分析分组的首部，从分组中提取数据部分，差错检验等等。</li><li>排队时延：分组在经过网络传输时要经过许多路由器，要在路由器中排队等待转发。<br>网络的通信量越大，排队时延越长。<br><font color="red"><strong>总时延 &#x3D; 发送时延 + 传播时延 + 处理时延 + 排队时延。</strong></font><br>高速链路（高带宽链路）相比其他提高的是数据的发送速率，减小发送时延。纤传输速率高即向光纤信道发送数据的速率高。</li></ol><p><strong>时延带宽积</strong><br>时延带宽积 &#x3D; 传播时延 * 带宽。<br>时延带宽积表示的是一个管道的体积，表示这个链路可容纳的比特，或者说同一时刻正在链路上传送的数据。<br>只有链路中充满了比特时，链路才得到充分的利用。</p><p><strong>往返时间</strong><br>A 向 B 发数据后需要收到 B 发回的确认信息才会继续发送数据，A 发完数据后等待确认信息的时间就是往返时间（RTT）。<br>有效数据率 &#x3D; 数据长度 &#x2F; ( 发送时间 + RTT )。<br>在互联网中，往返时间还包括各中间结点的处理时延、排队时延和转发数据时的发送时延等。<br>使用卫星通信时，往返时间会比较长，是很重要的指标。</p><p><strong>利用率</strong><br>利用率有信道利用率和网络利用率两种：</p><ol><li>信道利用率：信道有百分之多少的时间是被利用的，即有数据通过。</li><li>网络利用率：全网络的信道利用率的加权平均值。<br>信道利用率并非越大越好，因为根据排队论，当利用率增大时，信道引起的时延也会迅速增加。<br>D0 为网络空闲时的时延，则网络当前时延 D 和利用率 U 之间的关系为： D &#x3D; D0 &#x2F; (1 - U）。<br>当利用率 U 达到 0.5 时，时延就要加倍。利用率接近 1 时，时延会趋于无穷。</li></ol><h3 id="1-6-2-计算机网络的非性能特征"><a href="#1-6-2-计算机网络的非性能特征" class="headerlink" title="1.6.2 计算机网络的非性能特征"></a>1.6.2 计算机网络的非性能特征</h3><p>费用、质量、标准化、可靠性、可扩展性和可升级性、易于管理和维护</p><h2 id="1-7-计算机网络体系结构"><a href="#1-7-计算机网络体系结构" class="headerlink" title="1.7 计算机网络体系结构"></a>1.7 计算机网络体系结构</h2><p>计算机的体系结构是分层次的。</p><h3 id="1-7-1-计算机网络体系结构的形成"><a href="#1-7-1-计算机网络体系结构的形成" class="headerlink" title="1.7.1 计算机网络体系结构的形成"></a>1.7.1 计算机网络体系结构的形成</h3><p>两个计算机之间通信要完的工作：</p><ol><li>发起通信的计算机必须将数据通信的通路进行激活。</li><li>告诉网络如何识别接收数据的计算机</li><li>发起通信的计算机必须查明对方计算机是否已开机，并且与网络连接正常。</li><li>发起通信的计算机中的应用程序必须清楚，对方计算机中的文件管理程序是否已做好接收文件和存储文件的准备工作。</li><li>若计算机的文件格式不兼容，至少其中一台计算机可以完成格式转换。</li><li>如果出现差错或意外事故，应有可靠的措施保证对方计算机最后收到正确的文件。<br>相互通信的计算机系统必须高度协调工作才可以完成通信。</li></ol><p>OSI 的七层协议的体系结构是法律上的国际标准。<br>应用最广泛的、事实上的国际标准是 TCP&#x2F;IP。<font color="red">互联网即采用的 TCP&#x2F;IP。</font></p><h3 id="1-7-2-协议与划分层次"><a href="#1-7-2-协议与划分层次" class="headerlink" title="1.7.2 协议与划分层次"></a>1.7.2 协议与划分层次</h3><p><strong>网络协议（简称协议）</strong>是为进行网络中的数据交换而建立的规则、标准或约定。<br>网络协议规定了网络中交换的数据的格式和有关的同步问题。<br>协议主要由三个要素组成：</p><ol><li>语法：数据与控制信息的结构或格式</li><li>语义：需要发出何种控制信息，完成何种动作以及做出何种响应</li><li>同步：时间实现顺序的详细说明</li></ol><p><strong>网络协议是分层的</strong>，分层的好处：</p><ol><li>各层之间互相独立。某一层并不知道另一层是如何实现的，只知道接口。</li><li>灵活性好。只要接口不变，一层发生变化不影响另一层。</li><li>结构上可分割开。</li><li>易于实现和维护。</li><li>能促进标准化工作。</li></ol><p>各层需要完成的工作包括一下的一种或多种：</p><ol><li>差错控制。使通信更加可靠。</li><li>流量控制。发送端的发送速率必须使接收端来得及接受，不能太快。</li><li>分段和重装。发送端将数据分块，接收端还原。</li><li>复用和分用。发送端几个高层会话复用一条低层的连接，在接收端再进行分用。</li><li>连接建立和释放。交换数据前先建立一条逻辑连接，数据传送结束后再释放。</li></ol><p><strong>计算机网络的各层及其协议的集合就是网络的体系结构。</strong></p><h3 id="1-7-3-具有五层协议的体系结构"><a href="#1-7-3-具有五层协议的体系结构" class="headerlink" title="1.7.3 具有五层协议的体系结构"></a>1.7.3 具有五层协议的体系结构</h3><p>TCP&#x2F;IP 是个四层的体系结构，包含<font color="red">应用层、运输层、网际层和网络接口层</font>。实质上 TCP&#x2F;IP 只有上三层，最下面的网络接口层没什么内容。</p><p>这里以五层协议为例来学习，五层协议中的物理层和数据链路层对于 TCP&#x2F;IP 中的网络接口层。<br><strong>应用层</strong><br>任务：通过应用进程间的交互来完成特定网络应用。<br>应用层协议定义的是应用进程间通信和互的规则。进程即主机中正在运行的程序。<br>互联网中的应用层协议有<font color="red">域名系统 DNS，支持万维网应用的 HTTP 协议，支持电子邮件的 SMTP 协议等。</font><br>应用层交互的数据单元称为<font color="red">报文。</font><br><strong>运输层</strong><br>任务：负责向两台主机中进程之间的通信提供通用的数据传输服务。应用层利用该服务传输应用层报文。<br>运输层有<strong>复用</strong>和<strong>分用</strong>的功能。因为一台主机有多个进程，复用就是多个应用层进程可同时使用下面运输层的功能。<br>运输层主要使用两种协议：</p><ol><li>传输控制协议 TCP：提供<font color="red">面向连接的、可靠的</font>数据传输服务。数据传输的单位是<font color="red">报文段</font>。</li><li>用户数据报协议 UDP：提供<font color="red">无连接的、尽最大努力</font>的数据传输服务，<font color="red">不保证数据传输的可靠性</font>。数据传输的单位是<font color="red">用户数据报</font>。<br><strong>网络层</strong><br>任务：为分组交换网上的不同主机提供通信服务；选择合适的路由。<br>发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组或包进行传送。<br>TCP&#x2F;IP 体系中，<font color="red">网络层使用 IP 协议，因此分组也叫 IP 数据报，或简称数据报，但注意这与用户数据报不同。</font><br>互联网使用无连接的网际协议 IP。<br>无论哪一层的数据单元，都可以笼统地用“分组”来表示。<br><strong>数据链路层</strong><br>任务：<font color="red">将网络层交下来的 IP 数据报组装成，在两个相邻结点的链路上传送帧。</font><br>每一帧包括<font color="red">数据和必要的控制信息（包括同步信息、地址信息、差错控制等）。</font><br><strong>物理层</strong><br>物理层传输的单位是比特。<br><img src="/image-1.png" alt="alt text"><br>&emsp;&emsp;上图中为主机1的 AP1 进程向主机2 的 AP2 进程间传送数据的过程。</li></ol><p>&emsp;&emsp;第5层、第4层、第3层分别为数据加上了属于本层的控制信息，都位于首部。第2层的控制信息分为两部分加到了首部和尾部。</p><p>&emsp;&emsp;对等层次间的数据单位称为该层的<font color="red">协议数据单元。</font></p><p>&emsp;&emsp;在路由器中，分组上升到第3层，过程中每一层都根据控制信息进行必要的操作并将该控制信息剥去。在第三层根据首部中的目的地址查找路由器中的转发表，找出转发分组的接口，然后依次加上新的控制信息下降到第1层，将数据发送出去。</p><p>&emsp;&emsp;理解：上图可以发现<font color="red">网际层的控制信息用于整个网络，而链路层的控制信息仅用于两个节点之间。路由器只到第3层。</font></p><h3 id="1-7-4-实体、协议、服务和服务访问点"><a href="#1-7-4-实体、协议、服务和服务访问点" class="headerlink" title="1.7.4 实体、协议、服务和服务访问点"></a>1.7.4 实体、协议、服务和服务访问点</h3><p><strong>实体</strong><br>实体表示可发送或可接收信息的硬件或软件进程。<br><strong>协议</strong><br>协议是控制两个对等实体间进行通信的规则的集合。<br>在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。要实现本层协议，也需要下一层提供的服务。<br>上层使用下层提供的服务必须通过与下层交换一些命令，即服务原语。<br><strong>服务访问点</strong><br>同一系统中相邻两层的实体交互的地方称为服务访问点，实际上就是一个逻辑接口。<br>协议必须把所有不利的条件都事先估计到，确保能应对所有异常情况。</p><h3 id="1-7-5-TCP-IP的体系结构"><a href="#1-7-5-TCP-IP的体系结构" class="headerlink" title="1.7.5 TCP&#x2F;IP的体系结构"></a>1.7.5 TCP&#x2F;IP的体系结构</h3><p>技术的发展不严格遵循分层概念，事实上现在某些应用程序可以直接使用 IP 层甚至网络接口层，如下图。<br><img src="/image-2.png" alt="alt text"><br>TCP&#x2F;IP 协议族中的多种协议如下所示：<br><img src="/image-3.png" alt="alt text"></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
