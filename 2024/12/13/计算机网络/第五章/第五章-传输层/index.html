<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>《计算机网络（谢希仁）》- 第五章 传输层 | Adaptive Thinking</title><meta name="author" content="Yanhp"><meta name="copyright" content="Yanhp"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="目录 5.1 运输层协议概述 5.1.1 进程之间的通信 5.1.2 运输层的两个主要协议 5.1.3 运输层的端口   5.2 用户数据报协议UDP 5.2.1 UDP概述 5.2.2 UDP的首部格式   5.3 传输控制协议TCP概述 5.3.1 TCP最主要的特点 5.3.2 TCP的连接   5.4 可靠传输的工作原理 5.4.1 停止等待协议 5.4.2 连续ARQ协议   5.5 T">
<meta property="og:type" content="article">
<meta property="og:title" content="《计算机网络（谢希仁）》- 第五章 传输层">
<meta property="og:url" content="https://dirck-yhp.github.io/2024/12/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%94%E7%AB%A0/%E7%AC%AC%E4%BA%94%E7%AB%A0-%E4%BC%A0%E8%BE%93%E5%B1%82/index.html">
<meta property="og:site_name" content="Adaptive Thinking">
<meta property="og:description" content="目录 5.1 运输层协议概述 5.1.1 进程之间的通信 5.1.2 运输层的两个主要协议 5.1.3 运输层的端口   5.2 用户数据报协议UDP 5.2.1 UDP概述 5.2.2 UDP的首部格式   5.3 传输控制协议TCP概述 5.3.1 TCP最主要的特点 5.3.2 TCP的连接   5.4 可靠传输的工作原理 5.4.1 停止等待协议 5.4.2 连续ARQ协议   5.5 T">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://dirck-yhp.github.io/img/cover.jpg">
<meta property="article:published_time" content="2024-12-13T01:17:49.000Z">
<meta property="article:modified_time" content="2024-12-16T02:00:21.940Z">
<meta property="article:author" content="Yanhp">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://dirck-yhp.github.io/img/cover.jpg"><link rel="shortcut icon" href="/img/%E5%95%A4%E9%85%92.png"><link rel="canonical" href="https://dirck-yhp.github.io/2024/12/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%94%E7%AB%A0/%E7%AC%AC%E4%BA%94%E7%AB%A0-%E4%BC%A0%E8%BE%93%E5%B1%82/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '《计算机网络（谢希仁）》- 第五章 传输层',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avator.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">10</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> 分享</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/cover.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Adaptive Thinking</span></a><a class="nav-page-title" href="/"><span class="site-name">《计算机网络（谢希仁）》- 第五章 传输层</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> 分享</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">《计算机网络（谢希仁）》- 第五章 传输层</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-12-13T01:17:49.000Z" title="发表于 2024-12-13 09:17:49">2024-12-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-12-16T02:00:21.940Z" title="更新于 2024-12-16 10:00:21">2024-12-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li><a href="#51-%E8%BF%90%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0">5.1 运输层协议概述</a><ul>
<li><a href="#511-%E8%BF%9B%E7%A8%8B%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1">5.1.1 进程之间的通信</a></li>
<li><a href="#512-%E8%BF%90%E8%BE%93%E5%B1%82%E7%9A%84%E4%B8%A4%E4%B8%AA%E4%B8%BB%E8%A6%81%E5%8D%8F%E8%AE%AE">5.1.2 运输层的两个主要协议</a></li>
<li><a href="#513-%E8%BF%90%E8%BE%93%E5%B1%82%E7%9A%84%E7%AB%AF%E5%8F%A3">5.1.3 运输层的端口</a></li>
</ul>
</li>
<li><a href="#52-%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AEudp">5.2 用户数据报协议UDP</a><ul>
<li><a href="#521-udp%E6%A6%82%E8%BF%B0">5.2.1 UDP概述</a></li>
<li><a href="#522-udp%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F">5.2.2 UDP的首部格式</a></li>
</ul>
</li>
<li><a href="#53-%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AEtcp%E6%A6%82%E8%BF%B0">5.3 传输控制协议TCP概述</a><ul>
<li><a href="#531-tcp%E6%9C%80%E4%B8%BB%E8%A6%81%E7%9A%84%E7%89%B9%E7%82%B9">5.3.1 TCP最主要的特点</a></li>
<li><a href="#532-tcp%E7%9A%84%E8%BF%9E%E6%8E%A5">5.3.2 TCP的连接</a></li>
</ul>
</li>
<li><a href="#54-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">5.4 可靠传输的工作原理</a><ul>
<li><a href="#541-%E5%81%9C%E6%AD%A2%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE">5.4.1 停止等待协议</a></li>
<li><a href="#542-%E8%BF%9E%E7%BB%ADarq%E5%8D%8F%E8%AE%AE">5.4.2 连续ARQ协议</a></li>
</ul>
</li>
<li><a href="#55-tcp%E6%8A%A5%E6%96%87%E6%AE%B5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F">5.5 TCP报文段的首部格式</a></li>
<li><a href="#56-tcp%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%AE%9E%E7%8E%B0">5.6 TCP可靠传输的实现</a><ul>
<li><a href="#561-%E4%BB%A5%E5%AD%97%E8%8A%82%E4%B8%BA%E5%8D%95%E4%BD%8D%E7%9A%84%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3">5.6.1 以字节为单位的滑动窗口</a></li>
<li><a href="#562-%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4%E7%9A%84%E9%80%89%E6%8B%A9">5.6.2 超时重传时间的选择</a></li>
<li><a href="#563-%E9%80%89%E6%8B%A9%E7%A1%AE%E8%AE%A4sack">5.6.3 选择确认SACK</a></li>
</ul>
</li>
<li><a href="#57-tcp%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6">5.7 TCP的流量控制</a><ul>
<li><a href="#571-%E5%88%A9%E7%94%A8%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%AE%9E%E7%8E%B0%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6">5.7.1 利用滑动窗口实现流量控制</a></li>
<li><a href="#572-tcp%E7%9A%84%E4%BC%A0%E8%BE%93%E6%95%88%E7%8E%87">5.7.2 TCP的传输效率</a></li>
</ul>
</li>
<li><a href="#58-tcp%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6">5.8 TCP的拥塞控制</a><ul>
<li><a href="#581-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E4%B8%80%E8%88%AC%E5%8E%9F%E7%90%86">5.8.1 拥塞控制的一般原理</a></li>
<li><a href="#582-tcp%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95">5.8.2 TCP的拥塞控制方法</a></li>
<li><a href="#583-%E4%B8%BB%E5%8A%A8%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86aqm">5.8.3 主动队列管理AQM</a></li>
</ul>
</li>
<li><a href="#59-tcp%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86">5.9 TCP的运输连接管理</a><ul>
<li><a href="#591-tcp%E7%9A%84%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B">5.9.1 TCP的连接建立</a></li>
<li><a href="#592-tcp%E7%9A%84%E8%BF%9E%E6%8E%A5%E9%87%8A%E6%94%BE">5.9.2 TCP的连接释放</a></li>
<li><a href="#593-tcp%E7%9A%84%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E6%9C%BA">5.9.3 TCP的有限状态机</a></li>
</ul>
</li>
</ul>
<h2 id="问题与回答"><a href="#问题与回答" class="headerlink" title="问题与回答"></a>问题与回答</h2><h3 id="问题1"><a href="#问题1" class="headerlink" title="问题1"></a>问题1</h3><ol>
<li>运输层服务对象</li>
<li>端口和套接字的意义</li>
<li>UDP 的特点</li>
<li>TCP 的特点</li>
<li>可靠传输的工作原理</li>
<li>停止等待协议如何工作</li>
<li>停止等待协议的信道利用率很低，采用什么方法提高？</li>
<li>什么是 ARQ 协议</li>
<li>TCP 的滑动窗口是什么？有什么作用？</li>
<li>什么是流量控制？</li>
</ol>
<h3 id="回答1"><a href="#回答1" class="headerlink" title="回答1"></a>回答1</h3><ol>
<li><p>服务对象：<font color="red">不同主机的应用进程</font></p>
</li>
<li><p>端口和套接字：</p>
<ul>
<li><strong>端口</strong>：用于区分同一主机上应用层的不同应用进程</li>
<li><strong>套接字</strong>：<font color="red">IP地址 + 端口号</font>，是运输层传输的端点</li>
</ul>
</li>
<li><p>UDP特点：</p>
<ul>
<li><font color="red">无连接</font></li>
<li><font color="red">尽最大努力交付</font></li>
<li>支持一对一&#x2F;一对多&#x2F;多对一&#x2F;多对多</li>
<li>首部简单</li>
<li><font color="red">面向报文</font></li>
</ul>
</li>
<li><p>TCP特点：</p>
<ul>
<li><font color="red">面向连接</font></li>
<li><font color="red">可靠传输</font></li>
<li><strong>仅支持点对点通信</strong></li>
<li><font color="red">全双工通信</font></li>
<li><font color="red">面向字节流</font></li>
<li>有流量控制、拥塞控制功能</li>
</ul>
</li>
<li><p>可靠传输：依靠<strong>停止等待协议</strong>实现</p>
</li>
<li><p>停止等待协议：通过<font color="red">超时重传</font>实现。超时未收到确认信息就重传分组。</p>
</li>
<li><p>提高信道利用率方法：使用<strong>连续ARQ协议</strong>和<strong>滑动窗口协议</strong></p>
</li>
<li><p>ARQ协议：</p>
<ul>
<li>发送端每发送一个报文就维持一个<strong>超时计时器</strong></li>
<li>计时器时长比平均往返时间长一些</li>
<li>超时则重传</li>
</ul>
</li>
<li><p>TCP滑动窗口：</p>
<ul>
<li>包括<strong>发送窗口</strong>和<strong>接收窗口</strong></li>
<li>发送窗口内的信息可发送</li>
<li>窗口后沿收到确认号就前移</li>
<li>前沿受后沿位置及接收方窗口字段影响</li>
<li>作用：<ul>
<li>提高传输效率</li>
<li>实现流量控制</li>
</ul>
</li>
</ul>
</li>
<li><p>流量控制：<font color="red">控制发送方的发送速率</font>，避免接收方来不及接收</p>
</li>
</ol>
<h3 id="问题2"><a href="#问题2" class="headerlink" title="问题2"></a>问题2</h3><ol>
<li>TCP的流量控制如何实现？</li>
<li>什么是拥塞？拥塞控制的原理是什么？</li>
<li>判断出现拥塞的依据是什么？</li>
<li>流量控制和拥塞控制的区别？</li>
<li>TCP的拥塞控制如何实现？</li>
<li>TCP的连接过程是怎样的？</li>
<li>TCP的释放过程是怎样的？</li>
</ol>
<h3 id="回答2"><a href="#回答2" class="headerlink" title="回答2"></a>回答2</h3><ol>
<li><p>TCP流量控制实现：</p>
<ul>
<li>通过<font color="red">TCP报文首部的窗口字段</font>和<strong>滑动窗口</strong>实现</li>
<li>发送窗口不能超过确认报文中的窗口字段值</li>
<li>当接收方缓存不足时,调小窗口字段值,限制发送方发送量</li>
</ul>
</li>
<li><p>拥塞与拥塞控制：</p>
<ul>
<li><strong>拥塞</strong>：网络中某资源需求超过可用部分,导致网络性能变坏</li>
<li><strong>拥塞控制</strong>：<font color="red">防止过多数据注入到网络中</font></li>
</ul>
</li>
<li><p>拥塞判断依据：</p>
<ul>
<li>出现<font color="red">超时</font></li>
<li>注意:此超时与重传超时不同</li>
</ul>
</li>
<li><p>流量控制vs拥塞控制：</p>
<ul>
<li><strong>流量控制</strong>：<ul>
<li>端到端问题</li>
<li>接收端抑制发送速率</li>
</ul>
</li>
<li><strong>拥塞控制</strong>：<ul>
<li>全局性问题</li>
<li>涉及所有主机、路由等因素</li>
</ul>
</li>
</ul>
</li>
<li><p>TCP拥塞控制实现：</p>
<ul>
<li>基于<font color="red">窗口</font>的控制</li>
<li>采用四种算法：<ul>
<li><strong>慢开始</strong>：起点低但指数增长</li>
<li><strong>拥塞避免</strong>：超过阈值后等差增长</li>
<li><strong>快重传</strong>：快速重传避免超时</li>
<li><strong>快恢复</strong>：超时后快速恢复</li>
</ul>
</li>
</ul>
</li>
<li><p>TCP连接建立(三次握手)：</p>
<ol>
<li>连接请求报文 (<font color="red">SYN&#x3D;1</font>)</li>
<li>连接响应报文 (<font color="red">SYN&#x3D;1, ACK&#x3D;1</font>)</li>
<li>确认报文 (<font color="red">ACK&#x3D;1</font>, 无数据时不占序号)</li>
</ol>
</li>
<li><p>TCP连接释放(四次挥手)：</p>
<ol>
<li>A发出连接释放报文</li>
<li>B发回确认报文</li>
<li>B发送完数据后发出连接释放报文</li>
<li>A返回确认报文</li>
</ol>
<ul>
<li>注意：<ul>
<li>B收到最后确认后关闭</li>
<li>A等待<strong>2MSL</strong>时间后关闭(避免超时重传)</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="5-1-运输层协议概述"><a href="#5-1-运输层协议概述" class="headerlink" title="5.1 运输层协议概述"></a>5.1 运输层协议概述</h2><h3 id="5-1-1-进程之间的通信"><a href="#5-1-1-进程之间的通信" class="headerlink" title="5.1.1 进程之间的通信"></a>5.1.1 进程之间的通信</h3><ul>
<li>网络层为<font color="red">主机之间</font>提供通信</li>
<li>运输层为<font color="red">应用进程</font>提供端到端的逻辑通信</li>
<li>通信的真正端点是主机中的进程,即应用进程之间的通信是端到端的通信</li>
</ul>
<p><strong>运输层的复用和分用</strong>:</p>
<ul>
<li>发送方:不同进程通过不同端口号使用同一个运输层协议</li>
<li>接收方:运输层根据端口号分发报文给不同进程</li>
</ul>
<h3 id="5-1-2-运输层的两个主要协议"><a href="#5-1-2-运输层的两个主要协议" class="headerlink" title="5.1.2 运输层的两个主要协议"></a>5.1.2 运输层的两个主要协议</h3><p><strong>两个主要协议</strong>:</p>
<ul>
<li>传输控制协议 TCP</li>
<li>用户数据报协议 UDP</li>
<li>共同功能:复用、分用和检错</li>
</ul>
<p><strong>UDP特点</strong>:</p>
<ul>
<li><font color="red">无连接</font></li>
<li><font color="red">尽最大努力交付</font></li>
<li><font color="red">面向报文</font></li>
<li>无拥塞控制</li>
<li>支持一对一&#x2F;一对多&#x2F;多对一&#x2F;多对多</li>
<li>首部开销小</li>
<li>接收方无需发送确认</li>
</ul>
<p><strong>TCP特点</strong>:</p>
<ul>
<li><font color="red">面向连接</font></li>
<li><font color="red">点对点通信</font></li>
<li><font color="red">可靠传输</font></li>
<li><font color="red">全双工通信</font></li>
<li><font color="red">面向字节流</font></li>
<li>需要建立连接和释放连接</li>
<li>不提供广播或多播服务</li>
<li>首部较长,占用处理器资源多<br><img src="/image.png" alt="alt text"></li>
</ul>
<h3 id="5-1-3-运输层的端口"><a href="#5-1-3-运输层的端口" class="headerlink" title="5.1.3 运输层的端口"></a>5.1.3 运输层的端口</h3><p><strong>端口概述</strong>:</p>
<ul>
<li>使用<strong>16位端口号</strong>(两字节)标志端口</li>
<li>用于标志本机应用层中的不同进程</li>
<li>不同计算机间的端口无关联</li>
<li>属于<strong>软件端口</strong>,作为交互地址使用</li>
<li>区别于路由器上的硬件端口</li>
</ul>
<p><strong>端口号分配</strong>:</p>
<ol>
<li><p>服务器端端口号(0~49151):</p>
<ul>
<li><strong>熟知端口号</strong>(系统端口号): 0~1023</li>
<li><strong>登记端口号</strong>: 1024~49151</li>
</ul>
</li>
<li><p>客户端端口号(49152~65535):</p>
<ul>
<li>临时使用</li>
<li>通信结束后恢复未分配状态<br><img src="/image-1.png" alt="alt text"></li>
</ul>
</li>
</ol>
<h2 id="5-2-用户数据报协议UDP"><a href="#5-2-用户数据报协议UDP" class="headerlink" title="5.2 用户数据报协议UDP"></a>5.2 用户数据报协议UDP</h2><h3 id="5-2-1-UDP概述"><a href="#5-2-1-UDP概述" class="headerlink" title="5.2.1 UDP概述"></a>5.2.1 UDP概述</h3><p><strong>UDP的主要特点</strong>:</p>
<ul>
<li><font color="red">无连接</font></li>
<li><font color="red">尽最大努力交付</font></li>
<li><font color="red">面向报文</font></li>
<li>无拥塞控制</li>
<li>支持一对一&#x2F;一对多&#x2F;多对一&#x2F;多对多</li>
<li>首部开销小</li>
</ul>
<h3 id="5-2-2-UDP的首部格式"><a href="#5-2-2-UDP的首部格式" class="headerlink" title="5.2.2 UDP的首部格式"></a>5.2.2 UDP的首部格式</h3><p><strong>首部结构</strong>:</p>
<ul>
<li>总共<strong>8个字节</strong></li>
<li>包含四个字段:<ul>
<li>源端口</li>
<li>目的端口</li>
<li>长度</li>
<li>检验和</li>
</ul>
</li>
</ul>
<p><strong>差错处理</strong>:</p>
<ul>
<li>接收方发现目的端口号不对时:<ul>
<li>丢弃报文</li>
<li>使用ICMP发送”端口不可达”差错报文</li>
<li>注意:ICMP的应用tracert使用UDP报文</li>
</ul>
</li>
</ul>
<p><strong>UDP通信特点</strong>:</p>
<ul>
<li><font color="red">无连接通信</font></li>
<li>使用端口号但不需要套接字</li>
<li>TCP则必须在套接字之间建立连接</li>
</ul>
<p><strong>检验和机制</strong>:</p>
<ul>
<li>用于检验整个UDP报文的差错</li>
<li>检验方法:<ul>
<li>各个4字节段的反码求和</li>
<li>和作为检验和序列放入检验和字段</li>
<li>检验时对数据报各4字节段反码求和</li>
<li>若每一位都是1则无错</li>
</ul>
</li>
<li>特点:检错能力不强但处理快</li>
</ul>
<h2 id="5-3-传输控制协议TCP概述"><a href="#5-3-传输控制协议TCP概述" class="headerlink" title="5.3 传输控制协议TCP概述"></a>5.3 传输控制协议TCP概述</h2><h3 id="5-3-1-TCP最主要的特点"><a href="#5-3-1-TCP最主要的特点" class="headerlink" title="5.3.1 TCP最主要的特点"></a>5.3.1 TCP最主要的特点</h3><p><strong>基本特点</strong>:</p>
<ul>
<li><font color="red">面向连接</font>:使用前先建立连接,通信完后释放连接</li>
<li><font color="red">点对点通信</font></li>
<li><font color="red">可靠传输</font>:无差错、不丢失、无重复、按序到达</li>
<li><font color="red">全双工通信</font>:<ul>
<li>两端都设有发送缓存和接收缓存</li>
<li>发送:应用程序数据→TCP发送缓存→适时发送</li>
<li>接收:数据→接收缓存→应用进程适时读取</li>
</ul>
</li>
<li><font color="red">面向字节流</font>:<ul>
<li>流是字节序列</li>
<li>TCP将数据视为无结构的字节流<br><img src="/image-2.png" alt="alt text"></li>
</ul>
</li>
</ul>
<p><strong>报文长度控制</strong>:</p>
<ul>
<li>由接收窗口和网络拥塞程度决定</li>
<li>长数据可能划分为多个短数据块发送</li>
<li>短数据可能等待积累后再发送</li>
</ul>
<h3 id="5-3-2-TCP的连接"><a href="#5-3-2-TCP的连接" class="headerlink" title="5.3.2 TCP的连接"></a>5.3.2 TCP的连接</h3><p><strong>套接字(Socket)</strong>:</p>
<ul>
<li>定义:<font color="red">IP地址 + 端口号</font></li>
<li>作用:TCP连接的端点</li>
<li>格式:IP地址:端口号(如192.168.100.2:80)</li>
<li>特点:<ul>
<li>不是应用进程</li>
<li>不是端口</li>
<li>每个TCP连接由两端套接字唯一确定</li>
</ul>
</li>
</ul>
<h2 id="5-4-可靠传输的工作原理"><a href="#5-4-可靠传输的工作原理" class="headerlink" title="5.4 可靠传输的工作原理"></a>5.4 可靠传输的工作原理</h2><h3 id="5-4-1-停止等待协议"><a href="#5-4-1-停止等待协议" class="headerlink" title="5.4.1 停止等待协议"></a>5.4.1 停止等待协议</h3><p>停止等待协议用来在不可靠的传输网络上实现可靠通信。</p>
<p><strong>基本原理</strong>:</p>
<ul>
<li>每发送完一个分组就停止发送</li>
<li>等待对方的确认</li>
<li>收到确认后再发送下一个分组</li>
<li>分组需要进行编号</li>
</ul>
<p><strong>出现差错情况</strong>:</p>
<ul>
<li>发送的数据在传输过程丢失</li>
<li>到达接收方但报文内容出错</li>
<li>这两种情况接收方都不会发送确认</li>
<li>发送方超时没收到确认就会重传</li>
</ul>
<p><strong>超时重传机制</strong>:</p>
<ul>
<li><font color="red">超时未收到确认就重传分组</font></li>
<li>实现方式:<ul>
<li>每发送完一个分组设置超时计时器</li>
<li>重传时间比平均往返时间长一些</li>
<li>这种机制称为<strong>自动重传请求(ARQ)</strong></li>
</ul>
</li>
</ul>
<p><strong>重要注意点</strong>:</p>
<ul>
<li>发送方必须暂时保留已发送分组的副本</li>
<li>分组和确认分组都需要编号</li>
<li>超时计时器的重传时间设置是复杂问题</li>
</ul>
<p><strong>确认丢失和迟到</strong>:</p>
<ul>
<li>接收方发送的确认丢失或迟到</li>
<li>发送方超时未收到确认也会重传</li>
<li>接收方收到重复报文会:<ul>
<li>丢弃重复报文</li>
<li>向发送方重发确认</li>
</ul>
</li>
<li>发送方收到重复确认会直接丢弃</li>
</ul>
<p><strong>提高信道利用率</strong>:</p>
<ul>
<li>停止等待协议的信道利用率很低</li>
<li>改进方法:采用<strong>流水线传输</strong></li>
<li>实现机制:<ul>
<li>使用<strong>连续ARQ协议</strong></li>
<li>使用<strong>滑动窗口协议</strong><br><img src="/image-3.png" alt="alt text"></li>
</ul>
</li>
</ul>
<h3 id="5-4-2-连续ARQ协议"><a href="#5-4-2-连续ARQ协议" class="headerlink" title="5.4.2 连续ARQ协议"></a>5.4.2 连续ARQ协议</h3><p><strong>主要规定</strong>:</p>
<ul>
<li>发送方维持一个<font color="red">发送窗口</font></li>
<li>窗口内分组可以连续发送</li>
<li>不需要等待对方确认</li>
<li>发送方收到确认后滑动窗口</li>
</ul>
<p><strong>接收方确认机制</strong>:</p>
<ul>
<li>采用<font color="red">累积确认</font></li>
<li>不必对每个分组逐个确认</li>
<li>对按序到达的最后一个分组发确认</li>
<li>表明此前分组都正确收到</li>
</ul>
<p><strong>特点</strong>:</p>
<ul>
<li>基于滑动窗口实现</li>
<li>滑动窗口是TCP协议的精髓</li>
</ul>
<h2 id="5-5-TCP报文段的首部格式"><a href="#5-5-TCP报文段的首部格式" class="headerlink" title="5.5 TCP报文段的首部格式"></a>5.5 TCP报文段的首部格式</h2><p>TCP传输的数据单元是报文段,分为首部和数据两部分:</p>
<ul>
<li>首部前<strong>20字节</strong>是固定的</li>
<li>后面有<strong>4N字节</strong>是可选的<br><img src="/image-4.png" alt="alt text"></li>
</ul>
<p><strong>首部字段作用</strong>:</p>
<ol>
<li><p><strong>序号字段</strong>:</p>
<ul>
<li>对数据流中的每个字节进行编号</li>
<li>序号范围:0~2^32</li>
<li>仅对数据部分编号,不包含首部</li>
</ul>
</li>
<li><p><strong>确认号字段</strong>:</p>
<ul>
<li>期望收到对方下一个报文段的第一个数据字节序号</li>
<li>若确认号为N,表示到N-1的数据都已正确收到</li>
</ul>
</li>
<li><p><strong>数据偏移字段</strong>:</p>
<ul>
<li>表示数据部分距报文起始处的偏移量</li>
<li>实际等于首部长度(20~60字节)</li>
</ul>
</li>
<li><p><strong>控制位</strong>(6个):</p>
<ul>
<li><font color="red">URG(紧急)</font>:当URG&#x3D;1时报文需要紧急传送</li>
<li><font color="red">ACK(确认)</font>:ACK&#x3D;1时确认号有效</li>
<li><font color="red">PSH(推送)</font>:接收方应尽快将数据交付应用进程</li>
<li><font color="red">RST(复位)</font>:表明TCP连接出现严重差错</li>
<li><font color="red">SYN(同步)</font>:用于连接建立</li>
<li><font color="red">FIN(终止)</font>:用于连接释放</li>
</ul>
</li>
<li><p><strong>窗口字段</strong>:</p>
<ul>
<li>指出发送本报文段的一方的接收窗口</li>
<li>用于流量控制</li>
</ul>
</li>
<li><p><strong>检验和字段</strong>:</p>
<ul>
<li>检验整个报文段</li>
<li>包括首部和数据部分</li>
</ul>
</li>
<li><p><strong>选项字段</strong>(可变长,最多40字节):</p>
<ul>
<li><strong>MSS</strong>(最大报文段长度):<ul>
<li>数据字段的最大长度</li>
<li>默认536字节</li>
</ul>
</li>
<li><strong>窗口扩大选项</strong>:<ul>
<li>用于超大容量网络</li>
</ul>
</li>
<li><strong>时间戳选项</strong>:<ul>
<li>计算往返时间RTT</li>
<li>防止序号绕回</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="5-6-TCP可靠传输的实现"><a href="#5-6-TCP可靠传输的实现" class="headerlink" title="5.6 TCP可靠传输的实现"></a>5.6 TCP可靠传输的实现</h2><h3 id="5-6-1-以字节为单位的滑动窗口"><a href="#5-6-1-以字节为单位的滑动窗口" class="headerlink" title="5.6.1 以字节为单位的滑动窗口"></a>5.6.1 以字节为单位的滑动窗口</h3><p><img src="/image-5.png" alt="alt text"></p>
<p><strong>基本概念</strong>:</p>
<ul>
<li>滑动窗口以<font color="red">字节为单位</font></li>
<li>每个字节都有序号</li>
</ul>
<p><strong>滑动窗口机制</strong>:</p>
<ul>
<li>发送窗口包含:<ul>
<li>允许发送的序号范围</li>
<li>后沿后面:已发送且已确认</li>
<li>前沿前面:不允许发送</li>
</ul>
</li>
<li>窗口移动特点:<ul>
<li>前沿:可前移、不动或后移</li>
<li>后沿:可不动(无新确认)或前移(有新确认)</li>
<li>后沿不可能后移</li>
</ul>
</li>
</ul>
<p><strong>窗口控制</strong>:</p>
<ul>
<li>接收方通过窗口字段控制发送方窗口大小</li>
<li>发送窗口大小由两个因素决定:<ul>
<li>接收方窗口字段值</li>
<li>拥塞窗口值</li>
</ul>
</li>
<li>取两者较小值</li>
</ul>
<p><strong>确认机制</strong>:</p>
<ul>
<li>接收方确认号 &#x3D; 按序收到数据的最高序号 + 1</li>
<li>发送方根据确认号和窗口字段构造发送窗口:<ul>
<li>确认号决定后沿</li>
<li>窗口字段值决定大小</li>
</ul>
</li>
</ul>
<p><strong>实例说明</strong>:</p>
<ol>
<li><p>初始状态:</p>
<ul>
<li>A(发送方)根据B发来的:<ul>
<li>窗口值(20)</li>
<li>确认号(31)</li>
</ul>
</li>
<li>构建发送窗口<br><img src="/image-6.png" alt="alt text"></li>
</ul>
</li>
<li><p>数据发送:</p>
<ul>
<li>A发送11字节(序号31-41)</li>
<li>窗口内数据分两部分:<ul>
<li>P1~P2:已发送未确认</li>
<li>P2~P3:允许发送未发送<br><img src="/image-7.png" alt="alt text"></li>
</ul>
</li>
</ul>
</li>
<li><p>窗口指针:<br><img src="/image-8.png" alt="alt text"></p>
<ul>
<li>P1:窗口后沿</li>
<li>P2:未发送第一字节</li>
<li>P3:窗口前沿</li>
<li>P2~P3:可用窗口</li>
</ul>
</li>
</ol>
<p><strong>发送缓存</strong>:</p>
<ul>
<li>功能:存放<ul>
<li>准备发送的数据</li>
<li>已发送未确认的数据</li>
</ul>
</li>
<li>特点:<ul>
<li>发送窗口是其一部分</li>
<li>后沿与发送窗口重合</li>
<li>已确认数据会被删除</li>
</ul>
</li>
</ul>
<p><strong>接收缓存</strong>:</p>
<ul>
<li>存放内容:<ul>
<li>按序到达待读取数据</li>
<li>未按序到达数据</li>
</ul>
</li>
<li>特点:<ul>
<li>接收窗口是其一部分</li>
<li>缓存满则窗口减至0</li>
<li>缓存空则窗口增大</li>
<li>窗口最大值不超过缓存大小</li>
</ul>
</li>
</ul>
<p><strong>累积确认机制</strong>:</p>
<ul>
<li>目的:减小传输开销</li>
<li>方式:<ul>
<li>适时发送确认</li>
<li>可捎带在数据上</li>
</ul>
</li>
<li>注意事项:<ul>
<li>不能过分推迟确认</li>
<li>连续最大长度报文需隔段确认</li>
</ul>
</li>
<li>特点:双方都有发送和接收窗口</li>
</ul>
<h3 id="5-6-2-超时重传时间的选择"><a href="#5-6-2-超时重传时间的选择" class="headerlink" title="5.6.2 超时重传时间的选择"></a>5.6.2 超时重传时间的选择</h3><p><strong>基本问题</strong>:</p>
<ul>
<li>TCP最复杂的问题之一</li>
<li>不能设为固定值:<ul>
<li>可能在高速局域网中传送</li>
<li>可能经过多个低速网络</li>
</ul>
</li>
</ul>
<p><strong>自适应算法</strong>:</p>
<ul>
<li>依据<font color="red">往返时间RTT</font>设置重传时间</li>
<li>RTTs(历史RTT加权平均):<ul>
<li>计算公式:新RTTs &#x3D; (1-a)<em>旧RTTs + a</em>新RTT</li>
<li>a建议值:0.125</li>
</ul>
</li>
<li>RTO(超时重传时间):<ul>
<li>计算公式:RTO &#x3D; RTTs + 4*RTTd</li>
<li>RTTd是RTT偏差加权平均值</li>
<li>RTTd计算:新RTTd &#x3D; (1-b)<em>旧RTTd + b</em>|RTTs-新RTT|</li>
<li>b建议值:0.25</li>
</ul>
</li>
</ul>
<p><strong>重传实现</strong>:</p>
<ul>
<li>报文段每重传一次,RTO增加一倍</li>
<li>不重传时使用上述公式计算RTO</li>
</ul>
<h3 id="5-6-3-选择确认SACK"><a href="#5-6-3-选择确认SACK" class="headerlink" title="5.6.3 选择确认SACK"></a>5.6.3 选择确认SACK</h3><p><strong>产生背景</strong>:</p>
<ul>
<li>报文未按序到达时(字节不连续)</li>
<li>发送方需重传确认号后所有报文</li>
<li>部分报文实际已到达,全部重传浪费资源</li>
</ul>
<p><strong>实现机制</strong>:</p>
<ul>
<li>首部选项中包含<font color="red">SACK字段</font></li>
<li>SACK使用两个字节块指明:<ul>
<li>连续字段开始位置</li>
<li>连续字段长度</li>
</ul>
</li>
<li>最多指出4个连续字节块边界</li>
</ul>
<h2 id="5-7-TCP的流量控制"><a href="#5-7-TCP的流量控制" class="headerlink" title="5.7 TCP的流量控制"></a>5.7 TCP的流量控制</h2><h3 id="5-7-1-利用滑动窗口实现流量控制"><a href="#5-7-1-利用滑动窗口实现流量控制" class="headerlink" title="5.7.1 利用滑动窗口实现流量控制"></a>5.7.1 利用滑动窗口实现流量控制</h3><p><strong>基本概念</strong>:</p>
<ul>
<li>目的:控制发送速率,使接收方来得及接收</li>
<li>实现方式:<ul>
<li>通过滑动窗口机制</li>
<li>接收方在窗口字段中指定窗口大小</li>
<li>发送窗口不超过接收方窗口值</li>
</ul>
</li>
</ul>
<p><strong>死锁问题</strong>:</p>
<ul>
<li>产生原因:<ul>
<li>接收窗口减至0</li>
<li>恢复后的通知报文丢失</li>
<li>双方相互等待</li>
</ul>
</li>
<li>解决方案:<ul>
<li>设置<font color="red">持续计时器</font></li>
<li>收到零窗口通知时启动</li>
<li>超时发送探测报文段</li>
<li>对方返回确认时给出窗口值</li>
</ul>
</li>
</ul>
<h3 id="5-7-2-TCP的传输效率"><a href="#5-7-2-TCP的传输效率" class="headerlink" title="5.7.2 TCP的传输效率"></a>5.7.2 TCP的传输效率</h3><p><strong>基本过程</strong>:</p>
<ul>
<li>应用进程将数据传入TCP发送缓存</li>
<li>后续发送任务由TCP完成</li>
</ul>
<p><strong>Nagle算法</strong>:</p>
<ul>
<li>目的:避免发送很小的报文段</li>
<li>工作机制:<ul>
<li>先发送第一个数据字节</li>
<li>收到确认后发送剩余数据</li>
<li>收到前一报文确认后发送下一个</li>
<li>特殊情况立即发送:<ul>
<li>数据达到窗口一半大小</li>
<li>达到报文段最大长度</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-8-TCP的拥塞控制"><a href="#5-8-TCP的拥塞控制" class="headerlink" title="5.8 TCP的拥塞控制"></a>5.8 TCP的拥塞控制</h2><h3 id="5-8-1-拥塞控制的一般原理"><a href="#5-8-1-拥塞控制的一般原理" class="headerlink" title="5.8.1 拥塞控制的一般原理"></a>5.8.1 拥塞控制的一般原理</h3><p><strong>拥塞定义</strong>:</p>
<ul>
<li>对网络资源的需求超过可用部分</li>
<li>导致网络性能变坏</li>
<li>简言之:<font color="red">需求 &gt; 可用资源</font></li>
</ul>
<p><strong>拥塞特点</strong>:</p>
<ul>
<li>成因复杂</li>
<li>趋于恶化:<ul>
<li>报文未按时到达</li>
<li>发送方超时重传</li>
<li>更多分组进入网络</li>
<li>加剧拥塞</li>
</ul>
</li>
</ul>
<p><strong>拥塞控制vs流量控制</strong>:</p>
<ul>
<li>拥塞控制:<ul>
<li>全局性问题</li>
<li>防止过多数据注入网络</li>
<li>涉及所有主机和路由器</li>
</ul>
</li>
<li>流量控制:<ul>
<li>端到端问题</li>
<li>接收端抑制发送速率<br><img src="/image-9.png" alt="alt text"></li>
</ul>
</li>
</ul>
<p><strong>拥塞判断</strong>:</p>
<ul>
<li>主要依据:迟迟收不到确认</li>
<li>拥塞指标:<ul>
<li>丢弃的分组数</li>
<li>平均队列长度</li>
<li>超时重传的分组数</li>
<li>平均分组时延</li>
</ul>
</li>
</ul>
<h3 id="5-8-2-TCP的拥塞控制方法"><a href="#5-8-2-TCP的拥塞控制方法" class="headerlink" title="5.8.2 TCP的拥塞控制方法"></a>5.8.2 TCP的拥塞控制方法</h3><p><strong>基本方法</strong>:</p>
<ul>
<li>采用四种算法:<ul>
<li><font color="red">慢开始</font></li>
<li><font color="red">拥塞避免</font></li>
<li><font color="red">快重传</font></li>
<li><font color="red">快恢复</font></li>
</ul>
</li>
</ul>
<p><strong>控制机制</strong>:</p>
<ul>
<li>基于窗口的控制</li>
<li>发送方维持拥塞窗口</li>
<li>发送窗口取值:min(拥塞窗口,接收窗口)</li>
<li>控制原则:<ul>
<li>无拥塞时增大窗口</li>
<li>有拥塞时减小窗口</li>
</ul>
</li>
</ul>
<p><strong>具体算法</strong>:</p>
<ol>
<li><p><strong>慢开始</strong>:</p>
<ul>
<li>初始窗口很小(2-4个SMSS)</li>
<li>每收到确认增加一次</li>
<li>每轮次窗口加倍</li>
</ul>
</li>
<li><p><strong>拥塞避免</strong>:</p>
<ul>
<li>窗口缓慢增大</li>
<li>超过界限值时使用</li>
<li>超时时窗口恢复初始值<br><img src="/image-10.png" alt="alt text"></li>
</ul>
</li>
<li><p><strong>快重传</strong>:</p>
<ul>
<li>立即确认收到的报文</li>
<li>丢失报文后确认号不变</li>
<li>收到3个重复确认就重传</li>
<li>避免超时误判为拥塞<br><img src="/image-11.png" alt="alt text"></li>
</ul>
</li>
<li><p><strong>快恢复</strong>:</p>
<ul>
<li>一般超时:界限值减半,窗口置初值</li>
<li>快重传时:界限值减半,窗口等于界限值</li>
</ul>
</li>
</ol>
<h3 id="5-8-3-主动队列管理AQM"><a href="#5-8-3-主动队列管理AQM" class="headerlink" title="5.8.3 主动队列管理AQM"></a>5.8.3 主动队列管理AQM</h3><p><strong>基本概念</strong>:</p>
<ul>
<li>网络层路由器采用的机制</li>
<li>目的:减少网络拥塞</li>
</ul>
<p><strong>实现方式</strong>:</p>
<ul>
<li><font color="red">分组丢弃策略</font></li>
<li>队列未满时就丢弃后续分组</li>
<li>具体策略未标准化</li>
</ul>
<h2 id="5-9-TCP的运输连接管理"><a href="#5-9-TCP的运输连接管理" class="headerlink" title="5.9 TCP的运输连接管理"></a>5.9 TCP的运输连接管理</h2><p>TCP 连接有三个阶段：连接建立、数据传送、连接释放。<br>主动发起 TCP 连接的应用进程是客户，另一方是服务器。<br>TCP 的连接开始前客户和服务器都会创建一个传输控制块 TCB，其中存储如 TCP 连接表、指向发送&#x2F;接收缓存的指针、指向重传队列的指针等。连接释放后删除。</p>
<h3 id="5-9-1-TCP的连接建立"><a href="#5-9-1-TCP的连接建立" class="headerlink" title="5.9.1 TCP的连接建立"></a>5.9.1 TCP的连接建立</h3><p><strong>三次握手机制</strong>:</p>
<ul>
<li>服务器确认客户的连接请求</li>
<li>客户确认服务器的确认<br><img src="/image-12.png" alt="alt text"></li>
</ul>
<p><strong>报文规则</strong>:</p>
<ul>
<li>连接请求和接受报文:<ul>
<li>不能携带数据</li>
<li>消耗一个序号</li>
</ul>
</li>
<li>第三个ACK报文:<ul>
<li>可携带可不携带数据</li>
<li>不携带则不消耗序号</li>
</ul>
</li>
</ul>
<p><strong>连接状态</strong>:</p>
<ul>
<li><font color="red">SYN-SENT</font>:同步已发送</li>
<li><font color="red">SYN-RCVD</font>:同步收到</li>
<li><font color="red">ESTABLISHED</font>:已连接</li>
</ul>
<p><strong>TCP规定</strong>:</p>
<ul>
<li>SYN&#x3D;1的报文:不能携带数据但消耗序号</li>
<li>ACK&#x3D;1的报文:不携带数据则不消耗序号</li>
<li>第二个报文可拆分为:<ul>
<li>确认报文(ACK&#x3D;1,ack&#x3D;x+1)</li>
<li>同步报文(SYN&#x3D;1,seq&#x3D;y)</li>
</ul>
</li>
</ul>
<h3 id="5-9-2-TCP的连接释放"><a href="#5-9-2-TCP的连接释放" class="headerlink" title="5.9.2 TCP的连接释放"></a>5.9.2 TCP的连接释放</h3><p><strong>四次挥手机制</strong>:</p>
<ul>
<li>任何一方可发起连接释放</li>
<li>等待对方确认后进入半关闭</li>
<li>另一方无数据时也发起释放</li>
<li>最终完全关闭连接<br><img src="/image-13.png" alt="alt text"></li>
</ul>
<p><strong>释放过程</strong>:</p>
<ol>
<li>A发送FIN报文,进入<font color="red">FIN-WAIT-1</font></li>
<li>B确认并进入<font color="red">CLOSE-WAIT</font></li>
<li>A收到确认进入<font color="red">FIN-WAIT-2</font></li>
<li>B发送FIN报文,进入<font color="red">LAST-ACK</font></li>
<li>A确认后进入<font color="red">TIME-WAIT</font></li>
<li>等待2MSL后进入CLOSED</li>
</ol>
<p><strong>TIME-WAIT意义</strong>:</p>
<ul>
<li>确保最后ACK能到达B</li>
<li>处理B的FIN重传</li>
<li>防止旧报文进入新连接</li>
</ul>
<p><strong>保活计时器</strong>:</p>
<ul>
<li>功能:检测客户端故障</li>
<li>工作方式:<ul>
<li>收到数据重置(2小时)</li>
<li>超时发送探测报文(每75s)</li>
<li>连续10次无响应则关闭连接</li>
</ul>
</li>
</ul>
<h3 id="5-9-3-TCP的有限状态机"><a href="#5-9-3-TCP的有限状态机" class="headerlink" title="5.9.3 TCP的有限状态机"></a>5.9.3 TCP的有限状态机</h3><p><strong>状态变迁</strong>:</p>
<ul>
<li>虚线:服务器进程</li>
<li>实线:客户进程<br><img src="/image-14.png" alt="alt text"></li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://dirck-yhp.github.io">Yanhp</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://dirck-yhp.github.io/2024/12/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%94%E7%AB%A0/%E7%AC%AC%E4%BA%94%E7%AB%A0-%E4%BC%A0%E8%BE%93%E5%B1%82/">https://dirck-yhp.github.io/2024/12/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%94%E7%AB%A0/%E7%AC%AC%E4%BA%94%E7%AB%A0-%E4%BC%A0%E8%BE%93%E5%B1%82/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://dirck-yhp.github.io" target="_blank">Adaptive Thinking</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/cover.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/12/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E5%85%AD%E7%AB%A0/%E7%AC%AC%E5%85%AD%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/" title="《计算机网络（谢希仁）》- 第六章 应用层"><img class="cover" src="/img/cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">《计算机网络（谢希仁）》- 第六章 应用层</div></div><div class="info-2"><div class="info-item-1">目录 6.1 域名系统DNS 6.1.1 域名系统概述 6.1.2 互联网的域名结构 6.1.3 域名服务器   6.2 文件传送协议 6.2.1 FTP概述 6.2.2 FTP的基本工作原理 6.2.3 简单文件传送协议TFTP   6.3 远程终端协议TELNET 6.4 万维网www 6.4.1 万维网概述 6.4.2 统一资源定位符URL 6.4.3 超文本传送协议HTTP 6.4.4 万维网的文档 6.4.5 万维网的信息检索系统   6.5 电子邮件 6.5.1 电子邮件概述 6.5.2 简单邮件传送协议SMTP 6.5.3 电子邮件的信息格式 6.5.4 邮件读取协议POP3和IMAP 6.5.5 基于万维网的电子邮件 6.5.6 通用互联网邮件扩充MIME   6.6 动态主机配置协议DHCP 6.7 简单网络管理协议SNMP 6.7.1 网络管理的基本概念 6.7.2 管理信息结构SMI 6.7.3 管理信息库MIB 6.7.4 SNMP的协议数据单元和报文   6.8 应用进程跨越网络的通信 6.8.1 系统调用和应用编程接口 6.8.2...</div></div></div></a><a class="pagination-related" href="/2024/12/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E5%9B%9B%E7%AB%A0/%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%B1%82/" title="《计算机网络（谢希仁）》- 第四章 网络层"><img class="cover" src="/img/cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">《计算机网络（谢希仁）》- 第四章 网络层</div></div><div class="info-2"><div class="info-item-1">目录 4.1 网络层提供的两种服务 4.2 网际协议IP 4.2.1 虚拟互连网络 4.2.2 分类的IP地址 4.2.3 IP地址与硬件地址 4.2.4 地址解析协议ARP 4.2.5 IP数据报的格式   4.3 划分子网和构造超网 4.3.1 划分子网 4.3.2 使用子网时分组的转发 4.3.3 无分类编址CIDR(构造超网)   4.4 网际控制报文协议ICMP 4.4.1 ICMP报文的种类 4.4.2 ICMP的应用举例   4.5 互联网的路由选择协议 4.5.1 有关路由选择协议的几个基本概念 4.5.2 内部网关协议RIP 4.5.3 内部网关协议OSPF 4.5.4 外部网关协议BGP 4.5.5 路由器的构成   4.6 IPv6 4.6.1 IPv6的基本首部 4.6.2 IPv6的地址 4.6.3 从IPv4向IPv6过渡 4.6.4 ICMPv6   4.7 IP多播 4.7.1 IP多播的基本概念 4.7.2 在局域网上进行硬件多播 4.7.3 网际组管理协议IGMP和多播路由选择协议   4.8 虚拟专用网VPN和网络地址转换NAT 4.8.1...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avator.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Yanhp</div><div class="author-info-description">Keep calm and carry on.</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">10</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Dirck-YHP"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Dirck-YHP" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:Yanhp@zju.edu.cn" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="https://www.yuque.com/dirck" target="_blank" title="语雀"><i class="fab fa-book-open" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">摸鱼ing...</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95"><span class="toc-number">1.</span> <span class="toc-text">目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E4%B8%8E%E5%9B%9E%E7%AD%94"><span class="toc-number">2.</span> <span class="toc-text">问题与回答</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%981"><span class="toc-number">2.1.</span> <span class="toc-text">问题1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E7%AD%941"><span class="toc-number">2.2.</span> <span class="toc-text">回答1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%982"><span class="toc-number">2.3.</span> <span class="toc-text">问题2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E7%AD%942"><span class="toc-number">2.4.</span> <span class="toc-text">回答2</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E8%BF%90%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0"><span class="toc-number">3.</span> <span class="toc-text">5.1 运输层协议概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-1-%E8%BF%9B%E7%A8%8B%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-number">3.1.</span> <span class="toc-text">5.1.1 进程之间的通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-2-%E8%BF%90%E8%BE%93%E5%B1%82%E7%9A%84%E4%B8%A4%E4%B8%AA%E4%B8%BB%E8%A6%81%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.2.</span> <span class="toc-text">5.1.2 运输层的两个主要协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-3-%E8%BF%90%E8%BE%93%E5%B1%82%E7%9A%84%E7%AB%AF%E5%8F%A3"><span class="toc-number">3.3.</span> <span class="toc-text">5.1.3 运输层的端口</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AEUDP"><span class="toc-number">4.</span> <span class="toc-text">5.2 用户数据报协议UDP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-1-UDP%E6%A6%82%E8%BF%B0"><span class="toc-number">4.1.</span> <span class="toc-text">5.2.1 UDP概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-2-UDP%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.2.</span> <span class="toc-text">5.2.2 UDP的首部格式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AETCP%E6%A6%82%E8%BF%B0"><span class="toc-number">5.</span> <span class="toc-text">5.3 传输控制协议TCP概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-1-TCP%E6%9C%80%E4%B8%BB%E8%A6%81%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">5.1.</span> <span class="toc-text">5.3.1 TCP最主要的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-2-TCP%E7%9A%84%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.2.</span> <span class="toc-text">5.3.2 TCP的连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text">5.4 可靠传输的工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-1-%E5%81%9C%E6%AD%A2%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.1.</span> <span class="toc-text">5.4.1 停止等待协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-2-%E8%BF%9E%E7%BB%ADARQ%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.2.</span> <span class="toc-text">5.4.2 连续ARQ协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-TCP%E6%8A%A5%E6%96%87%E6%AE%B5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F"><span class="toc-number">7.</span> <span class="toc-text">5.5 TCP报文段的首部格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6-TCP%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">8.</span> <span class="toc-text">5.6 TCP可靠传输的实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-1-%E4%BB%A5%E5%AD%97%E8%8A%82%E4%B8%BA%E5%8D%95%E4%BD%8D%E7%9A%84%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3"><span class="toc-number">8.1.</span> <span class="toc-text">5.6.1 以字节为单位的滑动窗口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-2-%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">8.2.</span> <span class="toc-text">5.6.2 超时重传时间的选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-3-%E9%80%89%E6%8B%A9%E7%A1%AE%E8%AE%A4SACK"><span class="toc-number">8.3.</span> <span class="toc-text">5.6.3 选择确认SACK</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-7-TCP%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">9.</span> <span class="toc-text">5.7 TCP的流量控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-1-%E5%88%A9%E7%94%A8%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%AE%9E%E7%8E%B0%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">9.1.</span> <span class="toc-text">5.7.1 利用滑动窗口实现流量控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-2-TCP%E7%9A%84%E4%BC%A0%E8%BE%93%E6%95%88%E7%8E%87"><span class="toc-number">9.2.</span> <span class="toc-text">5.7.2 TCP的传输效率</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-8-TCP%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">10.</span> <span class="toc-text">5.8 TCP的拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-1-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E4%B8%80%E8%88%AC%E5%8E%9F%E7%90%86"><span class="toc-number">10.1.</span> <span class="toc-text">5.8.1 拥塞控制的一般原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-2-TCP%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95"><span class="toc-number">10.2.</span> <span class="toc-text">5.8.2 TCP的拥塞控制方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-3-%E4%B8%BB%E5%8A%A8%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86AQM"><span class="toc-number">10.3.</span> <span class="toc-text">5.8.3 主动队列管理AQM</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-9-TCP%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">11.</span> <span class="toc-text">5.9 TCP的运输连接管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-9-1-TCP%E7%9A%84%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B"><span class="toc-number">11.1.</span> <span class="toc-text">5.9.1 TCP的连接建立</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-9-2-TCP%E7%9A%84%E8%BF%9E%E6%8E%A5%E9%87%8A%E6%94%BE"><span class="toc-number">11.2.</span> <span class="toc-text">5.9.2 TCP的连接释放</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-9-3-TCP%E7%9A%84%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E6%9C%BA"><span class="toc-number">11.3.</span> <span class="toc-text">5.9.3 TCP的有限状态机</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/12/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E4%B8%80%E7%AB%A0/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A6%82%E5%BF%B5/" title="《操作系统》- 第一章 操作系统的概念"><img src="/img/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="《操作系统》- 第一章 操作系统的概念"/></a><div class="content"><a class="title" href="/2024/12/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E4%B8%80%E7%AB%A0/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A6%82%E5%BF%B5/" title="《操作系统》- 第一章 操作系统的概念">《操作系统》- 第一章 操作系统的概念</a><time datetime="2024-12-19T05:29:49.000Z" title="发表于 2024-12-19 13:29:49">2024-12-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B9%9D%E7%AB%A0/%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C%E5%92%8C%E7%A7%BB%E5%8A%A8%E7%BD%91%E7%BB%9C/" title="《计算机网络（谢希仁）》- 第九章 无线网络和移动网络"><img src="/img/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="《计算机网络（谢希仁）》- 第九章 无线网络和移动网络"/></a><div class="content"><a class="title" href="/2024/12/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B9%9D%E7%AB%A0/%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C%E5%92%8C%E7%A7%BB%E5%8A%A8%E7%BD%91%E7%BB%9C/" title="《计算机网络（谢希仁）》- 第九章 无线网络和移动网络">《计算机网络（谢希仁）》- 第九章 无线网络和移动网络</a><time datetime="2024-12-19T02:17:49.000Z" title="发表于 2024-12-19 10:17:49">2024-12-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E5%85%AB%E7%AB%A0/%E7%AC%AC%E5%85%AB%E7%AB%A0-%E4%BA%92%E8%81%94%E7%BD%91%E4%B8%8A%E7%9A%84%E9%9F%B3%E8%A7%86%E9%A2%91%E6%9C%8D%E5%8A%A1/" title="《计算机网络（谢希仁）》- 第八章 互联网上的音视频服务"><img src="/img/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="《计算机网络（谢希仁）》- 第八章 互联网上的音视频服务"/></a><div class="content"><a class="title" href="/2024/12/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E5%85%AB%E7%AB%A0/%E7%AC%AC%E5%85%AB%E7%AB%A0-%E4%BA%92%E8%81%94%E7%BD%91%E4%B8%8A%E7%9A%84%E9%9F%B3%E8%A7%86%E9%A2%91%E6%9C%8D%E5%8A%A1/" title="《计算机网络（谢希仁）》- 第八章 互联网上的音视频服务">《计算机网络（谢希仁）》- 第八章 互联网上的音视频服务</a><time datetime="2024-12-18T02:17:49.000Z" title="发表于 2024-12-18 10:17:49">2024-12-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%83%E7%AB%A0/%E7%AC%AC%E4%B8%83%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" title="《计算机网络（谢希仁）》- 第七章 网络安全"><img src="/img/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="《计算机网络（谢希仁）》- 第七章 网络安全"/></a><div class="content"><a class="title" href="/2024/12/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%83%E7%AB%A0/%E7%AC%AC%E4%B8%83%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" title="《计算机网络（谢希仁）》- 第七章 网络安全">《计算机网络（谢希仁）》- 第七章 网络安全</a><time datetime="2024-12-17T07:17:49.000Z" title="发表于 2024-12-17 15:17:49">2024-12-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E5%85%AD%E7%AB%A0/%E7%AC%AC%E5%85%AD%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/" title="《计算机网络（谢希仁）》- 第六章 应用层"><img src="/img/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="《计算机网络（谢希仁）》- 第六章 应用层"/></a><div class="content"><a class="title" href="/2024/12/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E5%85%AD%E7%AB%A0/%E7%AC%AC%E5%85%AD%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/" title="《计算机网络（谢希仁）》- 第六章 应用层">《计算机网络（谢希仁）》- 第六章 应用层</a><time datetime="2024-12-17T01:17:49.000Z" title="发表于 2024-12-17 09:17:49">2024-12-17</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By Yanhp</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>